{
  "info": {
    "_postman_id": "efef9992-119c-4169-a56b-a4b7f8e6b8d2",
    "name": "Romakop-Estate",
    "description": "Romakop Estate - Mobile APIs",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "15559224",
    "_collection_link": "https://go.postman.co/collection/15559224-efef9992-119c-4169-a56b-a4b7f8e6b8d2?source=collection_link"
  },
  "item": [
    {
      "name": "Mobile Endpoints",
      "item": [
        {
          "name": "Resident Head Module",
          "item": [
            {
              "name": "Token & Guest",
              "item": [
                {
                  "name": "Version2",
                  "item": [
                    {
                      "name": "Get Guest Categories Copy",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/resident/getguestcategorylist",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "resident",
                            "getguestcategorylist"
                          ]
                        },
                        "description": "Spools all group records"
                      },
                      "response": [
                        {
                          "name": "Get Guest Categories Copy",
                          "originalRequest": {
                            "method": "GET",
                            "header": [],
                            "body": {
                              "mode": "raw",
                              "raw": "",
                              "options": {
                                "raw": {
                                  "language": "json"
                                }
                              }
                            },
                            "url": {
                              "raw": "{{BASE_URL}}/resident/getguestcategorylist",
                              "host": [
                                "{{BASE_URL}}"
                              ],
                              "path": [
                                "resident",
                                "getguestcategorylist"
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": null,
                          "header": [
                            {
                              "key": "Server",
                              "value": "nginx/1.14.1"
                            },
                            {
                              "key": "Date",
                              "value": "Thu, 22 Jan 2026 19:45:29 GMT"
                            },
                            {
                              "key": "Content-Type",
                              "value": "application/json; charset=utf-8"
                            },
                            {
                              "key": "Transfer-Encoding",
                              "value": "chunked"
                            },
                            {
                              "key": "Connection",
                              "value": "keep-alive"
                            },
                            {
                              "key": "X-Powered-By",
                              "value": "Express"
                            },
                            {
                              "key": "Access-Control-Allow-Origin",
                              "value": "*"
                            },
                            {
                              "key": "ETag",
                              "value": "W/\"95b-tXr6Dhwu7+PeTwQHsnnRQAZIMT8\""
                            },
                            {
                              "key": "Vary",
                              "value": "Accept-Encoding"
                            },
                            {
                              "key": "Content-Encoding",
                              "value": "br"
                            }
                          ],
                          "cookie": [],
                          "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": [\n        {\n            \"name\": \"FRIEND_OF_OWNER\"\n        },\n        {\n            \"name\": \"FAMILY_MEMBER\"\n        },\n        {\n            \"name\": \"OVERNIGHT_GUEST\"\n        },\n        {\n            \"name\": \"WEDDING_GUEST\"\n        },\n        {\n            \"name\": \"PARTY_GUEST\"\n        },\n        {\n            \"name\": \"CONFERENCE_ATTENDEE\"\n        },\n        {\n            \"name\": \"DINNER_GUEST\"\n        },\n        {\n            \"name\": \"PRIVATE_FUNCTION_GUEST\"\n        },\n        {\n            \"name\": \"SHORT_TERM_RENTAL_GUEST\"\n        },\n        {\n            \"name\": \"VACATION_GUEST\"\n        },\n        {\n            \"name\": \"LODGE_OR_RESORT_GUEST\"\n        },\n        {\n            \"name\": \"TOURIST_STAYING_ON_PROPERTY\"\n        },\n        {\n            \"name\": \"DIGNITARY\"\n        },\n        {\n            \"name\": \"HIGH_PROFILE_VISITOR\"\n        },\n        {\n            \"name\": \"BUSINESS_PARTNER\"\n        },\n        {\n            \"name\": \"INVESTOR_GUEST\"\n        },\n        {\n            \"name\": \"CELEBRITY_GUEST\"\n        },\n        {\n            \"name\": \"ELECTRICIAN\"\n        },\n        {\n            \"name\": \"PLUMBER\"\n        },\n        {\n            \"name\": \"GARDENER\"\n        },\n        {\n            \"name\": \"LANDSCAPER\"\n        },\n        {\n            \"name\": \"CLEANER\"\n        },\n        {\n            \"name\": \"HVAC_TECHNICIAN\"\n        },\n        {\n            \"name\": \"PEST_CONTROL_TECHNICIAN\"\n        },\n        {\n            \"name\": \"PACKAGE_DELIVERY_DRIVER\"\n        },\n        {\n            \"name\": \"GROCERY_DELIVERY_PERSONNEL\"\n        },\n        {\n            \"name\": \"COURIER_SERVICE\"\n        },\n        {\n            \"name\": \"FURNITURE_DELIVERY_TEAM\"\n        },\n        {\n            \"name\": \"FUEL_OR_UTILITY_DELIVERY\"\n        },\n        {\n            \"name\": \"CONSTRUCTION_CREW\"\n        },\n        {\n            \"name\": \"RENOVATION_SPECIALIST\"\n        },\n        {\n            \"name\": \"TECHNICAL_INSTALLER\"\n        },\n        {\n            \"name\": \"IT_NETWORK_TECHNICIAN\"\n        },\n        {\n            \"name\": \"SOLAR_TECHNICIAN\"\n        },\n        {\n            \"name\": \"POOL_SERVICE_TECHNICIAN\"\n        },\n        {\n            \"name\": \"REAL_ESTATE_AGENT\"\n        },\n        {\n            \"name\": \"PROPERTY_SURVEYOR\"\n        },\n        {\n            \"name\": \"PROPERTY_INSPECTOR\"\n        },\n        {\n            \"name\": \"ACCOUNTANT\"\n        },\n        {\n            \"name\": \"LAWYER\"\n        },\n        {\n            \"name\": \"ESTATE_MANAGER\"\n        },\n        {\n            \"name\": \"FINANCIAL_AUDITOR\"\n        },\n        {\n            \"name\": \"BUILDING_INSPECTOR\"\n        },\n        {\n            \"name\": \"ENVIRONMENTAL_OFFICER\"\n        },\n        {\n            \"name\": \"COMPLIANCE_AUDITOR\"\n        },\n        {\n            \"name\": \"HEALTH_AND_SAFETY_INSPECTOR\"\n        },\n        {\n            \"name\": \"HOUSEKEEPER\"\n        },\n        {\n            \"name\": \"CHEF\"\n        },\n        {\n            \"name\": \"NANNY\"\n        },\n        {\n            \"name\": \"BUTLER\"\n        },\n        {\n            \"name\": \"SECURITY_GUARD\"\n        },\n        {\n            \"name\": \"ACCESS_CONTROL_OFFICER\"\n        },\n        {\n            \"name\": \"PATROL_STAFF\"\n        },\n        {\n            \"name\": \"BODYGUARD\"\n        },\n        {\n            \"name\": \"CHAUFFEUR\"\n        },\n        {\n            \"name\": \"VALET_DRIVER\"\n        },\n        {\n            \"name\": \"SHUTTLE_DRIVER\"\n        },\n        {\n            \"name\": \"SEASONAL_HELPER\"\n        },\n        {\n            \"name\": \"INTERN\"\n        },\n        {\n            \"name\": \"EVENT_SUPPORT_STAFF\"\n        },\n        {\n            \"name\": \"TEMPORARY_ADMIN_STAFF\"\n        },\n        {\n            \"name\": \"PUBLIC_TOUR_GROUP\"\n        },\n        {\n            \"name\": \"SIGHTSEER\"\n        },\n        {\n            \"name\": \"HERITAGE_VISITOR\"\n        },\n        {\n            \"name\": \"MUSEUM_VISITOR\"\n        },\n        {\n            \"name\": \"SCHOOL_GROUP\"\n        },\n        {\n            \"name\": \"UNIVERSITY_RESEARCHER\"\n        },\n        {\n            \"name\": \"HISTORIAN\"\n        },\n        {\n            \"name\": \"FIELD_STUDY_GROUP\"\n        },\n        {\n            \"name\": \"LOCAL_ORGANIZATION\"\n        },\n        {\n            \"name\": \"CULTURAL_GROUP\"\n        },\n        {\n            \"name\": \"SOCIAL_CLUB\"\n        },\n        {\n            \"name\": \"VOLUNTEER_GROUP\"\n        },\n        {\n            \"name\": \"POLICE_OFFICER\"\n        },\n        {\n            \"name\": \"INVESTIGATOR\"\n        },\n        {\n            \"name\": \"DETECTIVE\"\n        },\n        {\n            \"name\": \"FIREFIGHTER\"\n        },\n        {\n            \"name\": \"RESCUE_TEAM\"\n        },\n        {\n            \"name\": \"HAZMAT_TEAM\"\n        },\n        {\n            \"name\": \"AMBULANCE_CREW\"\n        },\n        {\n            \"name\": \"PARAMEDIC\"\n        },\n        {\n            \"name\": \"EMERGENCY_MEDICAL_TECHNICIAN\"\n        }\n    ],\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                        }
                      ]
                    },
                    {
                      "name": "Get Resident Copy",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/resident/getresident/RR1000000077",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "resident",
                            "getresident",
                            "RR1000000077"
                          ]
                        },
                        "description": "Spools all group records"
                      },
                      "response": [
                        {
                          "name": "Get Resident Copy",
                          "originalRequest": {
                            "method": "GET",
                            "header": [],
                            "body": {
                              "mode": "raw",
                              "raw": "",
                              "options": {
                                "raw": {
                                  "language": "json"
                                }
                              }
                            },
                            "url": {
                              "raw": "{{BASE_URL}}/resident/getresident/RR1000000077",
                              "host": [
                                "{{BASE_URL}}"
                              ],
                              "path": [
                                "resident",
                                "getresident",
                                "RR1000000077"
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": null,
                          "header": [
                            {
                              "key": "Server",
                              "value": "nginx/1.14.1"
                            },
                            {
                              "key": "Date",
                              "value": "Thu, 22 Jan 2026 19:45:40 GMT"
                            },
                            {
                              "key": "Content-Type",
                              "value": "application/json; charset=utf-8"
                            },
                            {
                              "key": "Transfer-Encoding",
                              "value": "chunked"
                            },
                            {
                              "key": "Connection",
                              "value": "keep-alive"
                            },
                            {
                              "key": "X-Powered-By",
                              "value": "Express"
                            },
                            {
                              "key": "Access-Control-Allow-Origin",
                              "value": "*"
                            },
                            {
                              "key": "ETag",
                              "value": "W/\"5f2-PSH9oRt+m6whvrHA/BeRg+lz9Vc\""
                            },
                            {
                              "key": "Vary",
                              "value": "Accept-Encoding"
                            },
                            {
                              "key": "Content-Encoding",
                              "value": "br"
                            }
                          ],
                          "cookie": [],
                          "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": {\n        \"coyid\": \"E001\",\n        \"coyname\": \"Example Estate\",\n        \"residentid\": \"RR1000000077\",\n        \"firstname\": \"Okonkwo1\",\n        \"lastname\": \"Nwabueze1\",\n        \"middlename\": \"G\",\n        \"phone\": \"080233570189\",\n        \"email\": \"nwabuezeokonkwo0@gmail.com\",\n        \"whatsappfone\": \"080233571189\",\n        \"dob\": \"2002-01-01T00:00:00.000Z\",\n        \"gender\": \"Male\",\n        \"maritalstatus\": \"Single\",\n        \"estateaddr\": \"1 abc rd\",\n        \"formeraddr\": \"1 xyz road\",\n        \"workplacename\": \"ABC Nig L\",\n        \"workplacepost\": \"General Manager\",\n        \"workplaceaddr\": \"1 fgh road\",\n        \"photofilename\": \"RR1000000077-jetstamp.png\",\n        \"photomimetype\": \"image/png\",\n        \"signedUrl\": \"https://storage.googleapis.com/romakop/resident/RR1000000077-jetstamp.png?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=romakopstorageuser%40ajebobeta.iam.gserviceaccount.com%2F20260122%2Fauto%2Fstorage%2Fgoog4_request&X-Goog-Date=20260122T194540Z&X-Goog-Expires=899&X-Goog-SignedHeaders=host&X-Goog-Signature=6ffa718baba997cd477843bab9a40b9b1ad3320fb96dd6cc625956fd19afb17de3c77a29b6f573d5d49fe6ffadd4c68e8fdca1838b71ef96cf3432eee1236d0f93267a4c78d02ba75049d7e0078ac925d89e1ceb5689664906d42c025d6f8a98827185536b9624fc75f67dad7c19f3a354573af32d08141bfe7cd2f3d8927373a6666a4440d3dc6a023d6e6cbe85f4d3df4596fc4785d51612e90025827c264746adb34e54011d189701eeaed0c5e93ab62e2b61cfae7df8f9151f3c5db7143569ef5eb3fe79c7c8efa22c6e1c7710141a613f8b449bb96fee65e2c469037f4016aee03136bcf66c7bece33bea96e1fb3bd3203d126a55fe9ba6f278a6cc76fd\"\n    },\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                        }
                      ]
                    },
                    {
                      "name": "Generate Token Copy",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const data = {\r",
                              "    \"tokenType\": \"One-Off\",  // 'One-Off', 'Re-Usable'\r",
                              "    \"visitorMainCategory\": \"Casual Guest\", // 'Visitor', 'Casual Guest', 'Event Guest'\r",
                              "    \"residentid\": \"RR1000000079\",\r",
                              "    \"visitFirstname\": \"Test\",\r",
                              "    \"visitLastname\": \"Only\",\r",
                              "    \"email\": \"test@test.com\",\r",
                              "    \"phoneno\": \"08023357189\",\r",
                              "    \"additionnote\": \"another more test\",\r",
                              "    \"gender\": \"Male\",    // 'Male','Female','Others'\r",
                              "    \"visitorRelationship\": \"FRIEND_OF_OWNER\",   // {{BASE_URL}}/resident/getguestcategorylist\r",
                              "    \"arrivedate\": \"2026-01-25\",  // \"\" if not relevant\r",
                              "    \"durationnStartDate\": \"2026-01-25\",  // \"\" if not relevant\r",
                              "    \"durationEndDate\": \"2026-01-30\",  // \"\" if not relevant\r",
                              "    \"visitorNum\": 1,\r",
                              "    \"visitReason\": \"test\",\r",
                              "    \"eventTitle\": \"Test Event\",\r",
                              "    \"eventVisitors\":[   // empty ONLY if visitorMainCategory is Visitor\r",
                              "        // {\r",
                              "        //     \"visitorName\": \"xyx abc\",\r",
                              "        //     \"gender\": \"Male\",\r",
                              "            // \"fone\": \"08023357189\",\r",
                              "        //     \"email\": \"xya@gmail.com\"\r",
                              "        // },\r",
                              "        {\r",
                              "            \"visitorName\": \"dfg abc\",\r",
                              "            \"gender\": \"Female\",\r",
                              "            \"fone\": \"08023357189\",\r",
                              "            \"email\": \"abc@gmail.com\"\r",
                              "        }\r",
                              "    ]\r",
                              "}\r",
                              "\r",
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Your RSA Public Key PEM here (replace with actual key)\r",
                              "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                              "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                              "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                              "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                              "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                              "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                              "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                              "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                              "      '0QIDAQAB\\n' +\r",
                              "      '-----END PUBLIC KEY-----\\n';\r",
                              "\r",
                              "// Helper: PEM to CryptoKey import\r",
                              "\r",
                              "async function importRsaPublicKey(pem) {\r",
                              "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                              "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                              "    let pemContents = pem.trim();\r",
                              "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                              "    const binaryDerString = atob(pemContents);\r",
                              "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                              "\r",
                              "    return crypto.subtle.importKey(\r",
                              "        \"spki\",\r",
                              "        binaryDer.buffer,\r",
                              "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                              "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                              "        false,\r",
                              "        [\"encrypt\"]\r",
                              "    );\r",
                              "}\r",
                              "\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "function b64EncodeUnicode(str) {\r",
                              "    return btoa(unescape(encodeURIComponent(str)));\r",
                              "}\r",
                              "\r",
                              "async function hybridEncrypt(publicKey, data) {\r",
                              "    const encoder = new TextEncoder();\r",
                              "\r",
                              "    // 1. Generate AES key\r",
                              "    const aesKey = await crypto.subtle.generateKey(\r",
                              "        { name: \"AES-GCM\", length: 256 },\r",
                              "        true,\r",
                              "        [\"encrypt\", \"decrypt\"]\r",
                              "    );\r",
                              "\r",
                              "    // 2. Encrypt data with AES-GCM\r",
                              "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                              "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                              "    const encryptedData = await crypto.subtle.encrypt(\r",
                              "        { name: \"AES-GCM\", iv },\r",
                              "        aesKey,\r",
                              "        encodedData\r",
                              "    );\r",
                              "\r",
                              "    // 3. Export AES key raw\r",
                              "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                              "\r",
                              "    // 4. Encrypt AES key with RSA-OAEP\r",
                              "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                              "        { name: \"RSA-OAEP\" },\r",
                              "        publicKey,\r",
                              "        rawAesKey\r",
                              "    );\r",
                              "\r",
                              "    return {\r",
                              "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                              "        iv: bufToB64(iv),\r",
                              "        encryptedData: bufToB64(encryptedData)\r",
                              "    };\r",
                              "}\r",
                              "\r",
                              "async function finalEncrypt(data) {\r",
                              "    console.log('data (finalEncrypt) => ', data)\r",
                              "    try {\r",
                              "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                              " console.log('publicKey => ', publicKey)\r",
                              "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                              "        console.log('encryptedPayload => ', encryptedPayload)\r",
                              "\r",
                              "        // Serialize final payload as JSON string\r",
                              "        const finalPayload = JSON.stringify({ \r",
                              "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                              "            iv: encryptedPayload.iv,\r",
                              "            encryptedData: encryptedPayload.encryptedData\r",
                              "        });\r",
                              "        console.log('finalPayload => ', finalPayload)\r",
                              "\r",
                              "        // Create hash input and hash it (same as before)\r",
                              "        // const inputToHash = btoa(finalPayload) + secret;\r",
                              "        // const inputToHash = finalPayload + secret;\r",
                              "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                              "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                              "     \r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(inputToHash);\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "console.log('dataToHash => ', dataToHash)\r",
                              "console.log('hash => ', hash)\r",
                              "        // Set headers and body in Postman\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "        pm.variables.set('body', finalPayload);\r",
                              "\r",
                              "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                              "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Encryption error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await finalEncrypt(data);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        },
                        {
                          "listen": "test",
                          "script": {
                            "exec": [
                              "pm.globals.set(\"token\", \" \");\r",
                              "\r",
                              "var jsonData = pm.response.json();\r",
                              "console.log('jsonData ->', jsonData);\r",
                              "\r",
                              "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                              "console.log('vData -> ', vData);\r",
                              "\r",
                              "let getToken = vData.access_token;\r",
                              "pm.globals.set(\"token\", getToken);\r",
                              "\r",
                              "// log fresh value directly (donâ€™t rely on globals here)\r",
                              "console.log(\"Auth Token (fresh):\", getToken);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "{{body}}\r\n",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/resident/addresidenttoken",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "resident",
                            "addresidenttoken"
                          ]
                        },
                        "description": "Token API\n\nPayload:  \n\nconst data = {  \n\"residentid\": \"RR1000000079\",  \n\"visitFirstname\": \"Test\",  \n\"visitLastname\": \"Only\",  \n\"email\": \"[test@test.com](https://mailto:test@test.com)\",  \n\"phoneno\": \"08023357189\",  \n\"arrivedate\": \"2025-11-25\",  \n\"visitorNum\": 1,  \n\"visitReason\": \"test\",  \n\"visitorMainCategory\": \"Event\", // 'Casual', 'Event'  \n\"visitorRelationship\": \"PERSONAL_GUESTS\", // {{BASE_URL}}/resident/getguestcategorylist  \n\"eventTitle\": \"Test Event\",  \n\"eventVisitors\":\\[ // empty if visitorMainCategory is CASUAL  \n{  \n\"visitorName\": \"dfg abc\",  \n\"gender\": \"Female\",  \n\"fone\": 08023357189,  \n\"email\": \"[abc@gmail.com](https://mailto:abc@gmail.com)\"  \n}  \n\\]  \n}"
                      },
                      "response": []
                    },
                    {
                      "name": "Edit Token Copy",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const data = {\r",
                              "    \"id\": \"e221c169-eafc-4f47-a3cb-79a4e2e2e6b9\",\r",
                              "    \"tokenType\": \"One-Off\",  // 'One-Off', 'Re-Usable'\r",
                              "    \"visitorMainCategory\": \"Event Guest\", // 'Visitor', 'Casual Guest', 'Event Guest'\r",
                              "    \"residentid\": \"RR1000000079\",\r",
                              "    \"visitFirstname\": \"Fast\",\r",
                              "    \"visitLastname\": \"Only\",\r",
                              "    \"email\": \"ayo@ayo.com\",\r",
                              "    \"phoneno\": \"080233117189\",\r",
                              "    \"additionnote\": \"This is more test\",\r",
                              "    \"gender\": \"Male\",    // 'Male','Female','Others'\r",
                              "    \"visitorRelationship\": \"FRIEND_OF_OWNER\",   // {{BASE_URL}}/resident/getguestcategorylist\r",
                              "    \"arrivedate\": \"2026-01-25\",  // \"\" if not relevant\r",
                              "    \"durationnStartDate\": \"2026-01-25\",  // \"\" if not relevant\r",
                              "    \"durationEndDate\": \"2026-01-30\",  // \"\" if not relevant\r",
                              "    \"visitorNum\": 1,\r",
                              "    \"visitReason\": \"test\",\r",
                              "    \"eventTitle\": \"Just Test Event\",\r",
                              "    \"eventVisitors\":[   // empty if visitorMainCategory is CASUAL\r",
                              "        {\r",
                              "            \"visitorName\": \"xyx abc\",\r",
                              "            \"gender\": \"Male\",\r",
                              "            \"fone\": \"08045537189\",\r",
                              "            \"email\": \"wsd@gmail.com\"\r",
                              "        },\r",
                              "        {\r",
                              "            \"visitorName\": \"dfg abc\",\r",
                              "            \"gender\": \"Female\",\r",
                              "            \"fone\": \"08012357189\",\r",
                              "            \"email\": \"dfc@gmail.com\"\r",
                              "        }\r",
                              "    ]\r",
                              "}\r",
                              "\r",
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Your RSA Public Key PEM here (replace with actual key)\r",
                              "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                              "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                              "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                              "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                              "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                              "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                              "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                              "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                              "      '0QIDAQAB\\n' +\r",
                              "      '-----END PUBLIC KEY-----\\n';\r",
                              "\r",
                              "// Helper: PEM to CryptoKey import\r",
                              "\r",
                              "async function importRsaPublicKey(pem) {\r",
                              "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                              "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                              "    let pemContents = pem.trim();\r",
                              "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                              "    const binaryDerString = atob(pemContents);\r",
                              "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                              "\r",
                              "    return crypto.subtle.importKey(\r",
                              "        \"spki\",\r",
                              "        binaryDer.buffer,\r",
                              "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                              "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                              "        false,\r",
                              "        [\"encrypt\"]\r",
                              "    );\r",
                              "}\r",
                              "\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "function b64EncodeUnicode(str) {\r",
                              "    return btoa(unescape(encodeURIComponent(str)));\r",
                              "}\r",
                              "\r",
                              "async function hybridEncrypt(publicKey, data) {\r",
                              "    const encoder = new TextEncoder();\r",
                              "\r",
                              "    // 1. Generate AES key\r",
                              "    const aesKey = await crypto.subtle.generateKey(\r",
                              "        { name: \"AES-GCM\", length: 256 },\r",
                              "        true,\r",
                              "        [\"encrypt\", \"decrypt\"]\r",
                              "    );\r",
                              "\r",
                              "    // 2. Encrypt data with AES-GCM\r",
                              "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                              "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                              "    const encryptedData = await crypto.subtle.encrypt(\r",
                              "        { name: \"AES-GCM\", iv },\r",
                              "        aesKey,\r",
                              "        encodedData\r",
                              "    );\r",
                              "\r",
                              "    // 3. Export AES key raw\r",
                              "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                              "\r",
                              "    // 4. Encrypt AES key with RSA-OAEP\r",
                              "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                              "        { name: \"RSA-OAEP\" },\r",
                              "        publicKey,\r",
                              "        rawAesKey\r",
                              "    );\r",
                              "\r",
                              "    return {\r",
                              "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                              "        iv: bufToB64(iv),\r",
                              "        encryptedData: bufToB64(encryptedData)\r",
                              "    };\r",
                              "}\r",
                              "\r",
                              "async function finalEncrypt(data) {\r",
                              "    console.log('data (finalEncrypt) => ', data)\r",
                              "    try {\r",
                              "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                              " console.log('publicKey => ', publicKey)\r",
                              "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                              "        console.log('encryptedPayload => ', encryptedPayload)\r",
                              "\r",
                              "        // Serialize final payload as JSON string\r",
                              "        const finalPayload = JSON.stringify({ \r",
                              "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                              "            iv: encryptedPayload.iv,\r",
                              "            encryptedData: encryptedPayload.encryptedData\r",
                              "        });\r",
                              "        console.log('finalPayload => ', finalPayload)\r",
                              "\r",
                              "        // Create hash input and hash it (same as before)\r",
                              "        // const inputToHash = btoa(finalPayload) + secret;\r",
                              "        // const inputToHash = finalPayload + secret;\r",
                              "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                              "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                              "     \r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(inputToHash);\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "console.log('dataToHash => ', dataToHash)\r",
                              "console.log('hash => ', hash)\r",
                              "        // Set headers and body in Postman\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "        pm.variables.set('body', finalPayload);\r",
                              "\r",
                              "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                              "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Encryption error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await finalEncrypt(data);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        },
                        {
                          "listen": "test",
                          "script": {
                            "exec": [
                              "pm.globals.set(\"token\", \" \");\r",
                              "\r",
                              "var jsonData = pm.response.json();\r",
                              "console.log('jsonData ->', jsonData);\r",
                              "\r",
                              "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                              "console.log('vData -> ', vData);\r",
                              "\r",
                              "let getToken = vData.access_token;\r",
                              "pm.globals.set(\"token\", getToken);\r",
                              "\r",
                              "// log fresh value directly (donâ€™t rely on globals here)\r",
                              "console.log(\"Auth Token (fresh):\", getToken);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "request": {
                        "method": "PUT",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "{{body}}\r\n",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/resident/editresidenttoken",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "resident",
                            "editresidenttoken"
                          ]
                        },
                        "description": "edit Token API\n\nPayload:  \nconst data = {  \n\"id\": \"e221c169-eafc-4f47-a3cb-79a4e2e2e6b9\",  \n\"residentid\": \"RR1000000079\",  \n\"visitFirstname\": \"Test\",  \n\"visitLastname\": \"Only\",  \n\"email\": \"[test@test.com](https://mailto:test@test.com)\",  \n\"phoneno\": \"08023357189\",  \n\"arrivedate\": \"2025-11-25\",  \n\"visitorNum\": 2,  \n\"visitReason\": \"test\",  \n\"visitorMainCategory\": \"Event\", // 'Casual', 'Event'  \n\"visitorRelationship\": \"PERSONAL_GUESTS\", // {{BASE_URL}}/resident/getguestcategorylist  \n\"eventTitle\": \"Test Event\",  \n\"eventVisitors\":\\[ // empty if visitorMainCategory is CASUAL  \n{  \n\"visitorName\": \"xyx abc\",  \n\"gender\": \"Male\",  \n\"fone\": 08023357189,  \n\"email\": \"[xya@gmail.com](https://mailto:xya@gmail.com)\"  \n},  \n{  \n\"visitorName\": \"dfg abc\",  \n\"gender\": \"Female\",  \n\"fone\": 08023357189,  \n\"email\": \"[abc@gmail.com](https://mailto:abc@gmail.com)\"  \n}  \n\\]  \n}"
                      },
                      "response": []
                    },
                    {
                      "name": "Status Token Change Copy",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const data = {\r",
                              "    \"id\": \"acfbeb23-b4c6-4e56-ae6a-88ce42c85bee\",\r",
                              "    \"residentid\": \"RR1000000079\",\r",
                              "    \"statuz\": \"Revoked\"     // 'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'\r",
                              "}\r",
                              "\r",
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Your RSA Public Key PEM here (replace with actual key)\r",
                              "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                              "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                              "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                              "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                              "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                              "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                              "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                              "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                              "      '0QIDAQAB\\n' +\r",
                              "      '-----END PUBLIC KEY-----\\n';\r",
                              "\r",
                              "// Helper: PEM to CryptoKey import\r",
                              "\r",
                              "async function importRsaPublicKey(pem) {\r",
                              "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                              "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                              "    let pemContents = pem.trim();\r",
                              "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                              "    const binaryDerString = atob(pemContents);\r",
                              "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                              "\r",
                              "    return crypto.subtle.importKey(\r",
                              "        \"spki\",\r",
                              "        binaryDer.buffer,\r",
                              "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                              "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                              "        false,\r",
                              "        [\"encrypt\"]\r",
                              "    );\r",
                              "}\r",
                              "\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "function b64EncodeUnicode(str) {\r",
                              "    return btoa(unescape(encodeURIComponent(str)));\r",
                              "}\r",
                              "\r",
                              "async function hybridEncrypt(publicKey, data) {\r",
                              "    const encoder = new TextEncoder();\r",
                              "\r",
                              "    // 1. Generate AES key\r",
                              "    const aesKey = await crypto.subtle.generateKey(\r",
                              "        { name: \"AES-GCM\", length: 256 },\r",
                              "        true,\r",
                              "        [\"encrypt\", \"decrypt\"]\r",
                              "    );\r",
                              "\r",
                              "    // 2. Encrypt data with AES-GCM\r",
                              "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                              "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                              "    const encryptedData = await crypto.subtle.encrypt(\r",
                              "        { name: \"AES-GCM\", iv },\r",
                              "        aesKey,\r",
                              "        encodedData\r",
                              "    );\r",
                              "\r",
                              "    // 3. Export AES key raw\r",
                              "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                              "\r",
                              "    // 4. Encrypt AES key with RSA-OAEP\r",
                              "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                              "        { name: \"RSA-OAEP\" },\r",
                              "        publicKey,\r",
                              "        rawAesKey\r",
                              "    );\r",
                              "\r",
                              "    return {\r",
                              "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                              "        iv: bufToB64(iv),\r",
                              "        encryptedData: bufToB64(encryptedData)\r",
                              "    };\r",
                              "}\r",
                              "\r",
                              "async function finalEncrypt(data) {\r",
                              "    console.log('data (finalEncrypt) => ', data)\r",
                              "    try {\r",
                              "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                              " console.log('publicKey => ', publicKey)\r",
                              "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                              "        console.log('encryptedPayload => ', encryptedPayload)\r",
                              "\r",
                              "        // Serialize final payload as JSON string\r",
                              "        const finalPayload = JSON.stringify({ \r",
                              "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                              "            iv: encryptedPayload.iv,\r",
                              "            encryptedData: encryptedPayload.encryptedData\r",
                              "        });\r",
                              "        console.log('finalPayload => ', finalPayload)\r",
                              "\r",
                              "        // Create hash input and hash it (same as before)\r",
                              "        // const inputToHash = btoa(finalPayload) + secret;\r",
                              "        // const inputToHash = finalPayload + secret;\r",
                              "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                              "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                              "     \r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(inputToHash);\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "console.log('dataToHash => ', dataToHash)\r",
                              "console.log('hash => ', hash)\r",
                              "        // Set headers and body in Postman\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "        pm.variables.set('body', finalPayload);\r",
                              "\r",
                              "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                              "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Encryption error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await finalEncrypt(data);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        },
                        {
                          "listen": "test",
                          "script": {
                            "exec": [
                              "pm.globals.set(\"token\", \" \");\r",
                              "\r",
                              "var jsonData = pm.response.json();\r",
                              "console.log('jsonData ->', jsonData);\r",
                              "\r",
                              "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                              "console.log('vData -> ', vData);\r",
                              "\r",
                              "let getToken = vData.access_token;\r",
                              "pm.globals.set(\"token\", getToken);\r",
                              "\r",
                              "// log fresh value directly (donâ€™t rely on globals here)\r",
                              "console.log(\"Auth Token (fresh):\", getToken);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "request": {
                        "method": "PUT",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "{{body}}\r\n",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/resident/statustokenchange",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "resident",
                            "statustokenchange"
                          ]
                        },
                        "description": "Token Status Change API\n\nPayload:  \nconst data = {  \n\"id\": \"acfbeb23-b4c6-4e56-ae6a-88ce42c85bee\",  \n\"residentid\": \"RR1000000079\",  \n\"statuz\": \"Revoked\" // 'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'  \n}"
                      },
                      "response": []
                    },
                    {
                      "name": "Get Token Usage Copy",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/resident/gettokenUsage/TT1000000067",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "resident",
                            "gettokenUsage",
                            "TT1000000067"
                          ]
                        },
                        "description": "Spools all group records"
                      },
                      "response": [
                        {
                          "name": "Get Token Usage Copy",
                          "originalRequest": {
                            "method": "GET",
                            "header": [],
                            "body": {
                              "mode": "raw",
                              "raw": "",
                              "options": {
                                "raw": {
                                  "language": "json"
                                }
                              }
                            },
                            "url": {
                              "raw": "{{BASE_URL}}/resident/gettokenUsage/TT1000000067",
                              "host": [
                                "{{BASE_URL}}"
                              ],
                              "path": [
                                "resident",
                                "gettokenUsage",
                                "TT1000000067"
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": null,
                          "header": [
                            {
                              "key": "Server",
                              "value": "nginx/1.14.1"
                            },
                            {
                              "key": "Date",
                              "value": "Thu, 22 Jan 2026 19:45:49 GMT"
                            },
                            {
                              "key": "Content-Type",
                              "value": "application/json; charset=utf-8"
                            },
                            {
                              "key": "Content-Length",
                              "value": "946"
                            },
                            {
                              "key": "Connection",
                              "value": "keep-alive"
                            },
                            {
                              "key": "X-Powered-By",
                              "value": "Express"
                            },
                            {
                              "key": "Access-Control-Allow-Origin",
                              "value": "*"
                            },
                            {
                              "key": "ETag",
                              "value": "W/\"3b2-DHbCfqc7kQ11jPgNF6fnXdrXP1Y\""
                            },
                            {
                              "key": "Vary",
                              "value": "Accept-Encoding"
                            }
                          ],
                          "cookie": [],
                          "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Resident movement records successfully retrieved\",\n    \"data\": {\n        \"myid\": \"e221c169-eafc-4f47-a3cb-79a4e2e2e6b9\",\n        \"coyid\": \"E001\",\n        \"residentid\": \"RR1000000079\",\n        \"visitorfullName\": \"Test Only\",\n        \"email\": \"test@test.com\",\n        \"phoneno\": \"08023357189\",\n        \"visitReason\": \"test\",\n        \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n        \"visitorNum\": 2,\n        \"status\": \"Un-Used\",\n        \"tok\": \"TT1000000067\",\n        \"createdat\": \"2025-12-10T17:33:59.000Z\",\n        \"signedinby\": null,\n        \"signedintime\": null,\n        \"signedingate\": null,\n        \"signedoutby\": null,\n        \"signedoutime\": null,\n        \"signedoutgate\": null,\n        \"EventVisitors\": [\n            {\n                \"recid\": \"2b0446be-3dff-4a2a-9f07-dd344efb0ec2\",\n                \"coyid\": \"E001\",\n                \"token\": \"TT1000000067\",\n                \"visitorName\": \"dfg abc\",\n                \"gender\": \"Female\",\n                \"email\": \"abc@gmail.com\"\n            },\n            {\n                \"recid\": \"8639c3a0-e845-4456-96e3-cb1cf758e9a1\",\n                \"coyid\": \"E001\",\n                \"token\": \"TT1000000067\",\n                \"visitorName\": \"xyx abc\",\n                \"gender\": \"Male\",\n                \"email\": \"xya@gmail.com\"\n            }\n        ]\n    },\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                        }
                      ]
                    },
                    {
                      "name": "Get All Token Copy",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/resident/getallresidenttoken",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "resident",
                            "getallresidenttoken"
                          ],
                          "query": [
                            {
                              "key": "addr",
                              "value": "abf",
                              "type": "text",
                              "disabled": true
                            },
                            {
                              "key": "status",
                              "value": "Used",
                              "description": "'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'\n",
                              "type": "text",
                              "disabled": true
                            },
                            {
                              "key": "residentid",
                              "value": "RR0000120202",
                              "type": "text",
                              "disabled": true
                            },
                            {
                              "key": "relationship",
                              "value": "FRIEND_OF_OWNER",
                              "description": "{{BASE_URL}}/resident/getguestcategorylist",
                              "disabled": true
                            },
                            {
                              "key": "tokencategory",
                              "value": "Visitor",
                              "description": "'Visitor', 'Casual Guest', 'Event Guest'",
                              "type": "text",
                              "disabled": true
                            },
                            {
                              "key": "tokentype",
                              "value": "Re-Usable",
                              "description": "'One-Off', 'Re-Usable'",
                              "disabled": true
                            }
                          ]
                        },
                        "description": "Spools all token records"
                      },
                      "response": [
                        {
                          "name": "Get All Token Copy",
                          "originalRequest": {
                            "method": "GET",
                            "header": [],
                            "body": {
                              "mode": "raw",
                              "raw": "",
                              "options": {
                                "raw": {
                                  "language": "json"
                                }
                              }
                            },
                            "url": {
                              "raw": "{{BASE_URL}}/resident/getallresidenttoken",
                              "host": [
                                "{{BASE_URL}}"
                              ],
                              "path": [
                                "resident",
                                "getallresidenttoken"
                              ],
                              "query": [
                                {
                                  "key": "addr",
                                  "value": "abf",
                                  "type": "text",
                                  "disabled": true
                                },
                                {
                                  "key": "status",
                                  "value": "Used",
                                  "description": "'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'\n",
                                  "type": "text",
                                  "disabled": true
                                },
                                {
                                  "key": "residentid",
                                  "value": "RR0000120202",
                                  "type": "text",
                                  "disabled": true
                                },
                                {
                                  "key": "relationship",
                                  "value": "FRIEND_OF_OWNER",
                                  "description": "{{BASE_URL}}/resident/getguestcategorylist",
                                  "disabled": true
                                },
                                {
                                  "key": "tokencategory",
                                  "value": "Visitor",
                                  "description": "'Visitor', 'Casual Guest', 'Event Guest'",
                                  "type": "text",
                                  "disabled": true
                                },
                                {
                                  "key": "tokentype",
                                  "value": "Re-Usable",
                                  "description": "'One-Off', 'Re-Usable'",
                                  "disabled": true
                                }
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": null,
                          "header": [
                            {
                              "key": "Server",
                              "value": "nginx/1.14.1"
                            },
                            {
                              "key": "Date",
                              "value": "Thu, 22 Jan 2026 19:45:56 GMT"
                            },
                            {
                              "key": "Content-Type",
                              "value": "application/json; charset=utf-8"
                            },
                            {
                              "key": "Transfer-Encoding",
                              "value": "chunked"
                            },
                            {
                              "key": "Connection",
                              "value": "keep-alive"
                            },
                            {
                              "key": "X-Powered-By",
                              "value": "Express"
                            },
                            {
                              "key": "Access-Control-Allow-Origin",
                              "value": "*"
                            },
                            {
                              "key": "ETag",
                              "value": "W/\"2d5d-Fu4qL0xtpLMtylThf3hOzfgEee8\""
                            },
                            {
                              "key": "Vary",
                              "value": "Accept-Encoding"
                            },
                            {
                              "key": "Content-Encoding",
                              "value": "br"
                            }
                          ],
                          "cookie": [],
                          "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": {\n        \"data\": [\n            {\n                \"id\": \"2980035b-8eb8-42e4-bb2b-63c7abed71e9\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000088\",\n                \"tok\": \"TT1000000076\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": null,\n                \"email\": \"test@tewst.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 1,\n                \"tokenType\": \"Re-Usable\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Event Guest\",\n                \"visitorRelationship\": \"PERSONAL_GUESTS\",\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-12-31T17:08:27.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"2993e1fd-fc37-4bac-899b-b8975a90d6ae\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000045\",\n                \"visitorfullName\": \"myTest Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"4-test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 2,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Event Guest\",\n                \"visitorRelationship\": null,\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-11-04T19:27:56.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"2fbcf3d9-8dbb-43cd-becb-b463fc8db9cc\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000075\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": null,\n                \"email\": \"test@tewst.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 1,\n                \"tokenType\": \"Re-Usable\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Event Guest\",\n                \"visitorRelationship\": \"PERSONAL_GUESTS\",\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-12-31T17:07:39.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"750a41ef-4e3c-4251-81ef-56d80824fa21\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000072\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 1,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Event Guest\",\n                \"visitorRelationship\": \"PERSONAL_GUESTS\",\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-12-31T10:52:03.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"81c069ee-ab0f-41b4-ab31-1af2f84e64cf\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000044\",\n                \"visitorfullName\": \"myTest Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"4-test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 2,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Visitor\",\n                \"visitorRelationship\": null,\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-11-04T19:02:06.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"acfbeb23-b4c6-4e56-ae6a-88ce42c85bee\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000041\",\n                \"visitorfullName\": \"myTest Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"4-test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 2,\n                \"tokenType\": \"Re-Usable\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Visitor\",\n                \"visitorRelationship\": null,\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Revoked\",\n                \"statusdate\": \"2025-11-05T16:17:59.000Z\",\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-11-02T23:07:03.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"b2c7603b-c6c8-47ca-b84f-938639efc456\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000058\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 1,\n                \"tokenType\": \"Re-Usable\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Casual\",\n                \"visitorRelationship\": \"PERSONAL_GUESTS\",\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-12-09T21:52:42.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"c3dc2df0-9dde-4bb1-89c0-45cc1bc8effc\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000043\",\n                \"visitorfullName\": \"myTest Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"4-test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 2,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Visitor\",\n                \"visitorRelationship\": null,\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-11-04T18:17:38.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"caee9e59-2a48-413e-b82c-155d68e7c38d\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000085\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": \"Male\",\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2026-01-25T00:00:00.000Z\",\n                \"visitorNum\": 1,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Casual Guest\",\n                \"visitorRelationship\": \"FRIEND_OF_OWNER\",\n                \"eventTitle\": \"Test Event\",\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2026-01-22T19:34:50.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"d60e4906-8dd8-4b07-b1b9-087292a9af64\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000042\",\n                \"visitorfullName\": \"myTest Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"4-test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 2,\n                \"tokenType\": \"Re-Usable\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Casual Guest\",\n                \"visitorRelationship\": null,\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-11-04T18:05:09.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"d792d65f-262a-4be4-8def-b222402b72f8\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000051\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 0,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Casual Guest\",\n                \"visitorRelationship\": null,\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-11-17T21:56:32.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"d9e08cc4-76b1-407a-a980-366053ccf097\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000074\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 1,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Event Guest\",\n                \"visitorRelationship\": \"PERSONAL_GUESTS\",\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-12-31T11:13:52.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"e221c169-eafc-4f47-a3cb-79a4e2e2e6b9\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000067\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 2,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Event Guest\",\n                \"visitorRelationship\": \"PERSONAL_GUESTS\",\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-12-10T17:33:59.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"ec4a51ca-6809-4a8a-a0af-6aa98a1f1320\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000066\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": null,\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 1,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Casual Guest\",\n                \"visitorRelationship\": \"PERSONAL_GUESTS\",\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-12-10T17:20:05.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"ef9ade5c-94df-42e7-8d0a-925aa4d67823\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000073\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": null,\n                \"email\": \"test@tewst.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n                \"visitorNum\": 1,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Event Guest\",\n                \"visitorRelationship\": \"PERSONAL_GUESTS\",\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-12-31T10:52:32.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"f3034ad1-7ef8-44a8-a3e4-69332e1cfe16\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"tok\": \"TT1000000084\",\n                \"visitorfullName\": \"Test Only\",\n                \"gender\": \"Male\",\n                \"email\": \"test@test.com\",\n                \"phoneno\": \"08023357189\",\n                \"visitReason\": \"test\",\n                \"arriveDate\": \"2026-01-25T00:00:00.000Z\",\n                \"visitorNum\": 1,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Casual Guest\",\n                \"visitorRelationship\": \"FRIEND_OF_OWNER\",\n                \"eventTitle\": \"Test Event\",\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2026-01-22T16:02:40.000Z\",\n                \"assigneddays\": []\n            },\n            {\n                \"id\": \"f8656c50-284a-477e-9171-81e9efb19136\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000088\",\n                \"tok\": \"TT1000000052\",\n                \"visitorfullName\": \"The  The\",\n                \"gender\": null,\n                \"email\": \"vfg@gmail.com\",\n                \"phoneno\": \"08065498725\",\n                \"visitReason\": \"The \",\n                \"arriveDate\": \"2025-11-18T00:00:00.000Z\",\n                \"visitorNum\": 5,\n                \"tokenType\": \"One-Off\",\n                \"additionnote\": null,\n                \"visitorMainCategory\": \"Visitor\",\n                \"visitorRelationship\": null,\n                \"eventTitle\": null,\n                \"durationnStartDate\": null,\n                \"durationEndDate\": null,\n                \"status\": \"Un-Used\",\n                \"statusdate\": null,\n                \"signinby\": null,\n                \"signintime\": null,\n                \"signingate\": null,\n                \"signoutby\": null,\n                \"signouttime\": null,\n                \"signoutgate\": null,\n                \"createdat\": \"2025-11-17T22:21:06.000Z\",\n                \"assigneddays\": []\n            }\n        ],\n        \"summary\": {\n            \"total_tokens\": 17,\n            \"unUsed_token\": 16,\n            \"used_token\": 0,\n            \"inUsed_token\": 0,\n            \"revoked_token\": 1,\n            \"expired_token\": 0\n        },\n        \"pagination\": {\n            \"total\": 17,\n            \"page\": 1,\n            \"pageSize\": 20,\n            \"totalPages\": 1\n        }\n    },\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                        }
                      ]
                    },
                    {
                      "name": "Get Token By Token Copy",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getresidenttoken/TT1000000076",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getresidenttoken",
                            "TT1000000076"
                          ]
                        },
                        "description": "Spools token records"
                      },
                      "response": [
                        {
                          "name": "Get Token By Token Copy",
                          "originalRequest": {
                            "method": "GET",
                            "header": [],
                            "body": {
                              "mode": "raw",
                              "raw": "",
                              "options": {
                                "raw": {
                                  "language": "json"
                                }
                              }
                            },
                            "url": {
                              "raw": "{{BASE_URL}}/estatemgt/getresidenttoken/TT1000000076",
                              "host": [
                                "{{BASE_URL}}"
                              ],
                              "path": [
                                "estatemgt",
                                "getresidenttoken",
                                "TT1000000076"
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": null,
                          "header": [
                            {
                              "key": "Server",
                              "value": "nginx/1.14.1"
                            },
                            {
                              "key": "Date",
                              "value": "Thu, 22 Jan 2026 19:46:29 GMT"
                            },
                            {
                              "key": "Content-Type",
                              "value": "application/json; charset=utf-8"
                            },
                            {
                              "key": "Content-Length",
                              "value": "806"
                            },
                            {
                              "key": "Connection",
                              "value": "keep-alive"
                            },
                            {
                              "key": "X-Powered-By",
                              "value": "Express"
                            },
                            {
                              "key": "Access-Control-Allow-Origin",
                              "value": "*"
                            },
                            {
                              "key": "ETag",
                              "value": "W/\"326-WOu+ldoj8OsjQQTUuyNmxJTLCuQ\""
                            },
                            {
                              "key": "Vary",
                              "value": "Accept-Encoding"
                            }
                          ],
                          "cookie": [],
                          "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Token records retrieved\",\n    \"data\": {\n        \"id\": \"2980035b-8eb8-42e4-bb2b-63c7abed71e9\",\n        \"coyid\": \"E001\",\n        \"residentid\": \"RR1000000088\",\n        \"tok\": \"TT1000000076\",\n        \"visitorfullName\": \"Test Only\",\n        \"gender\": null,\n        \"email\": \"test@tewst.com\",\n        \"phoneno\": \"08023357189\",\n        \"visitReason\": \"test\",\n        \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n        \"visitorNum\": 1,\n        \"tokenType\": \"Re-Usable\",\n        \"additionnote\": null,\n        \"visitorMainCategory\": \"Event Guest\",\n        \"visitorRelationship\": \"PERSONAL_GUESTS\",\n        \"eventTitle\": null,\n        \"durationnStartDate\": null,\n        \"durationEndDate\": null,\n        \"status\": \"Un-Used\",\n        \"statusdate\": null,\n        \"signinby\": null,\n        \"signintime\": null,\n        \"signingate\": null,\n        \"signoutby\": null,\n        \"signouttime\": null,\n        \"signoutgate\": null,\n        \"createdat\": \"2025-12-31T17:08:27.000Z\"\n    },\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                        }
                      ]
                    },
                    {
                      "name": "Get Token By Id Copy",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getresidenttokenbyid/2993e1fd-fc37-4bac-899b-b8975a90d6ae",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getresidenttokenbyid",
                            "2993e1fd-fc37-4bac-899b-b8975a90d6ae"
                          ]
                        },
                        "description": "Spools token records"
                      },
                      "response": [
                        {
                          "name": "Get Token By Id Copy",
                          "originalRequest": {
                            "method": "GET",
                            "header": [],
                            "body": {
                              "mode": "raw",
                              "raw": "",
                              "options": {
                                "raw": {
                                  "language": "json"
                                }
                              }
                            },
                            "url": {
                              "raw": "{{BASE_URL}}/estatemgt/getresidenttokenbyid/2993e1fd-fc37-4bac-899b-b8975a90d6ae",
                              "host": [
                                "{{BASE_URL}}"
                              ],
                              "path": [
                                "estatemgt",
                                "getresidenttokenbyid",
                                "2993e1fd-fc37-4bac-899b-b8975a90d6ae"
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": null,
                          "header": [
                            {
                              "key": "Server",
                              "value": "nginx/1.14.1"
                            },
                            {
                              "key": "Date",
                              "value": "Thu, 22 Jan 2026 19:46:58 GMT"
                            },
                            {
                              "key": "Content-Type",
                              "value": "application/json; charset=utf-8"
                            },
                            {
                              "key": "Content-Length",
                              "value": "794"
                            },
                            {
                              "key": "Connection",
                              "value": "keep-alive"
                            },
                            {
                              "key": "X-Powered-By",
                              "value": "Express"
                            },
                            {
                              "key": "Access-Control-Allow-Origin",
                              "value": "*"
                            },
                            {
                              "key": "ETag",
                              "value": "W/\"31a-Snx5E2hW9ajRdVMjbJGr5iwbnfs\""
                            },
                            {
                              "key": "Vary",
                              "value": "Accept-Encoding"
                            }
                          ],
                          "cookie": [],
                          "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Token records retrieved\",\n    \"data\": {\n        \"id\": \"2993e1fd-fc37-4bac-899b-b8975a90d6ae\",\n        \"coyid\": \"E001\",\n        \"residentid\": \"RR1000000079\",\n        \"tok\": \"TT1000000045\",\n        \"visitorfullName\": \"myTest Only\",\n        \"gender\": null,\n        \"email\": \"test@test.com\",\n        \"phoneno\": \"08023357189\",\n        \"visitReason\": \"4-test\",\n        \"arriveDate\": \"2025-11-25T00:00:00.000Z\",\n        \"visitorNum\": 2,\n        \"tokenType\": \"One-Off\",\n        \"additionnote\": null,\n        \"visitorMainCategory\": \"Event Guest\",\n        \"visitorRelationship\": null,\n        \"eventTitle\": null,\n        \"durationnStartDate\": null,\n        \"durationEndDate\": null,\n        \"status\": \"Un-Used\",\n        \"statusdate\": null,\n        \"signinby\": null,\n        \"signintime\": null,\n        \"signingate\": null,\n        \"signoutby\": null,\n        \"signouttime\": null,\n        \"signoutgate\": null,\n        \"createdat\": \"2025-11-04T19:27:56.000Z\"\n    },\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "Get Guest Categories",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/getguestcategorylist",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "getguestcategorylist"
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                },
                {
                  "name": "Get Resident",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/getresident/RR1000000077",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "getresident",
                        "RR1000000077"
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                },
                {
                  "name": "Generate Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data = {\r",
                          "    \"residentid\": \"RR1000000079\",\r",
                          "    \"visitFirstname\": \"Test\",\r",
                          "    \"visitLastname\": \"Only\",\r",
                          "    \"email\": \"test@test.com\",\r",
                          "    \"phoneno\": \"08023357189\",\r",
                          "    \"arrivedate\": \"2025-11-25\",\r",
                          "    \"visitorNum\": 1,\r",
                          "    \"visitReason\": \"test\",\r",
                          "    \"visitorMainCategory\": \"Event\",  // 'Casual', 'Event'\r",
                          "    \"visitorRelationship\": \"PERSONAL_GUESTS\",   // {{BASE_URL}}/resident/getguestcategorylist\r",
                          "    \"eventTitle\": \"Test Event\",\r",
                          "    \"eventVisitors\":[   // empty if visitorMainCategory is CASUAL\r",
                          "        // {\r",
                          "        //     \"visitorName\": \"xyx abc\",\r",
                          "        //     \"gender\": \"Male\",\r",
                          "            // \"fone\": 08023357189,\r",
                          "        //     \"email\": \"xya@gmail.com\"\r",
                          "        // },\r",
                          "        {\r",
                          "            \"visitorName\": \"dfg abc\",\r",
                          "            \"gender\": \"Female\",\r",
                          "            \"fone\": 08023357189,\r",
                          "            \"email\": \"abc@gmail.com\"\r",
                          "        }\r",
                          "    ]\r",
                          "}\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "POST",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{{body}}\r\n",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/addresidenttoken",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "addresidenttoken"
                      ]
                    },
                    "description": "Token API\n\nPayload:\n\nconst data = {  \n\"tokenType\": \"One-Off\", // 'One-Off', 'Re-Usable'  \n\"visitorMainCategory\": \"Casual Guest\", // 'Visitor', 'Casual Guest', 'Event Guest'  \n\"residentid\": \"RR1000000079\",  \n\"visitFirstname\": \"Test\",  \n\"visitLastname\": \"Only\",  \n\"email\": \"[test@test.com](https://mailto:test@test.com)\",  \n\"phoneno\": \"08023357189\",  \n\"additionnote\": \"another more test\",  \n\"gender\": \"Male\", // 'Male','Female','Others'  \n\"visitorRelationship\": \"FRIEND_OF_OWNER\", // {{BASE_URL}}/resident/getguestcategorylist  \n\"arrivedate\": \"2026-01-25\", // \"\" if not relevant  \n\"durationnStartDate\": \"2026-01-25\", // \"\" if not relevant  \n\"durationEndDate\": \"2026-01-30\", // \"\" if not relevant  \n\"visitorNum\": 1,  \n\"visitReason\": \"test\",  \n\"eventTitle\": \"Test Event\",  \n\"eventVisitors\":\\[ // empty ONLY if visitorMainCategory is Visitor  \n{  \n\"visitorName\": \"dfg abc\",  \n\"gender\": \"Female\",  \n\"fone\": \"08023357189\",  \n\"email\": \"[abc@gmail.com](https://mailto:abc@gmail.com)\"  \n}  \n\\]  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Edit Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data = {\r",
                          "    \"id\": \"e221c169-eafc-4f47-a3cb-79a4e2e2e6b9\",\r",
                          "    \"residentid\": \"RR1000000079\",\r",
                          "    \"visitFirstname\": \"Test\",\r",
                          "    \"visitLastname\": \"Only\",\r",
                          "    \"email\": \"test@test.com\",\r",
                          "    \"phoneno\": \"08023357189\",\r",
                          "    \"arrivedate\": \"2025-11-25\",\r",
                          "    \"visitorNum\": 2,\r",
                          "    \"visitReason\": \"test\",\r",
                          "    \"visitorMainCategory\": \"Event\",  // 'Casual', 'Event'\r",
                          "    \"visitorRelationship\": \"PERSONAL_GUESTS\",   // {{BASE_URL}}/resident/getguestcategorylist\r",
                          "    \"eventTitle\": \"Test Event\",\r",
                          "    \"eventVisitors\":[   // empty if visitorMainCategory is CASUAL\r",
                          "        {\r",
                          "            \"visitorName\": \"xyx abc\",\r",
                          "            \"gender\": \"Male\",\r",
                          "            \"fone\": 08023357189,\r",
                          "            \"email\": \"xya@gmail.com\"\r",
                          "        },\r",
                          "        {\r",
                          "            \"visitorName\": \"dfg abc\",\r",
                          "            \"gender\": \"Female\",\r",
                          "            \"fone\": 08023357189,\r",
                          "            \"email\": \"abc@gmail.com\"\r",
                          "        }\r",
                          "    ]\r",
                          "}\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "PUT",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{{body}}\r\n",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/editresidenttoken",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "editresidenttoken"
                      ]
                    },
                    "description": "edit Token API\n\nPayload:  \nconst data = {  \n\"id\": \"e221c169-eafc-4f47-a3cb-79a4e2e2e6b9\",  \n\"residentid\": \"RR1000000079\",  \n\"visitFirstname\": \"Test\",  \n\"visitLastname\": \"Only\",  \n\"email\": \"[test@test.com](https://mailto:test@test.com)\",  \n\"phoneno\": \"08023357189\",  \n\"arrivedate\": \"2025-11-25\",  \n\"visitorNum\": 2,  \n\"visitReason\": \"test\",  \n\"visitorMainCategory\": \"Event\", // 'Casual', 'Event'  \n\"visitorRelationship\": \"PERSONAL_GUESTS\", // {{BASE_URL}}/resident/getguestcategorylist  \n\"eventTitle\": \"Test Event\",  \n\"eventVisitors\":\\[ // empty if visitorMainCategory is CASUAL  \n{  \n\"visitorName\": \"xyx abc\",  \n\"gender\": \"Male\",  \n\"fone\": 08023357189,  \n\"email\": \"[xya@gmail.com](https://mailto:xya@gmail.com)\"  \n},  \n{  \n\"visitorName\": \"dfg abc\",  \n\"gender\": \"Female\",  \n\"fone\": 08023357189,  \n\"email\": \"[abc@gmail.com](https://mailto:abc@gmail.com)\"  \n}  \n\\]  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Status Token Change",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data = {\r",
                          "    \"id\": \"acfbeb23-b4c6-4e56-ae6a-88ce42c85bee\",\r",
                          "    \"residentid\": \"RR1000000079\",\r",
                          "    \"statuz\": \"Revoked\"     // 'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'\r",
                          "}\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "PUT",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{{body}}\r\n",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/statustokenchange",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "statustokenchange"
                      ]
                    },
                    "description": "Token Status Change API\n\nPayload:  \nconst data = {  \n\"id\": \"acfbeb23-b4c6-4e56-ae6a-88ce42c85bee\",  \n\"residentid\": \"RR1000000079\",  \n\"statuz\": \"Revoked\" // 'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Get Token Usage",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/gettokenUsage/TT1000000045",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "gettokenUsage",
                        "TT1000000045"
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                },
                {
                  "name": "Get All Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/getallresidenttoken",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "getallresidenttoken"
                      ],
                      "query": [
                        {
                          "key": "addr",
                          "value": "abf",
                          "disabled": true
                        },
                        {
                          "key": "status",
                          "value": "Used",
                          "description": "'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'\n",
                          "disabled": true
                        },
                        {
                          "key": "residentid",
                          "value": "RR0000120202",
                          "disabled": true
                        }
                      ]
                    },
                    "description": "Spools all token records"
                  },
                  "response": [
                    {
                      "name": "Get Movement",
                      "originalRequest": {
                        "method": "GET",
                        "header": [],
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getallresidentmovement",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getallresidentmovement"
                          ],
                          "query": [
                            {
                              "key": "addr",
                              "value": "abf",
                              "disabled": true
                            },
                            {
                              "key": "status",
                              "value": "Close",
                              "description": "Close or Open",
                              "disabled": true
                            }
                          ]
                        }
                      },
                      "status": "OK",
                      "code": 200,
                      "_postman_previewlanguage": "Text",
                      "header": [
                        {
                          "key": "Server",
                          "value": "nginx/1.14.1"
                        },
                        {
                          "key": "Date",
                          "value": "Tue, 28 Oct 2025 00:08:14 GMT"
                        },
                        {
                          "key": "Content-Type",
                          "value": "application/json; charset=utf-8"
                        },
                        {
                          "key": "Content-Length",
                          "value": "525"
                        },
                        {
                          "key": "Connection",
                          "value": "keep-alive"
                        },
                        {
                          "key": "X-Powered-By",
                          "value": "Express"
                        },
                        {
                          "key": "Access-Control-Allow-Origin",
                          "value": "*"
                        },
                        {
                          "key": "ETag",
                          "value": "W/\"20d-LkYChzAbDkl176MChzH6WkEbo70\""
                        },
                        {
                          "key": "Vary",
                          "value": "Accept-Encoding"
                        }
                      ],
                      "cookie": [],
                      "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": {\n        \"data\": [\n            {\n                \"id\": \"9e5bb854-4c0e-4aa1-955b-66f08e429dbf\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"addr\": \"1 abc rd\",\n                \"timein\": \"2025-10-27T20:51:02.000Z\",\n                \"timeout\": \"2025-10-27T22:32:34.000Z\",\n                \"mvstatus\": \"Close\",\n                \"assigneddays\": []\n            }\n        ],\n        \"summary\": {\n            \"total_movement\": 1,\n            \"opened_status\": 0,\n            \"closed_status\": 1\n        },\n        \"pagination\": {\n            \"total\": 1,\n            \"page\": 1,\n            \"pageSize\": 20,\n            \"totalPages\": 1\n        }\n    },\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                    }
                  ]
                },
                {
                  "name": "Get Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/estatemgt/getresidenttoken/RR1000000079",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "estatemgt",
                        "getresidenttoken",
                        "RR1000000079"
                      ]
                    },
                    "description": "Spools token records"
                  },
                  "response": [
                    {
                      "name": "Get Movement Copy",
                      "originalRequest": {
                        "method": "GET",
                        "header": [],
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getresidentmovement/RR1000000079",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getresidentmovement",
                            "RR1000000079"
                          ]
                        }
                      },
                      "status": "OK",
                      "code": 200,
                      "_postman_previewlanguage": "Text",
                      "header": [
                        {
                          "key": "Server",
                          "value": "nginx/1.14.1"
                        },
                        {
                          "key": "Date",
                          "value": "Mon, 27 Oct 2025 23:59:04 GMT"
                        },
                        {
                          "key": "Content-Type",
                          "value": "application/json; charset=utf-8"
                        },
                        {
                          "key": "Content-Length",
                          "value": "368"
                        },
                        {
                          "key": "Connection",
                          "value": "keep-alive"
                        },
                        {
                          "key": "X-Powered-By",
                          "value": "Express"
                        },
                        {
                          "key": "Access-Control-Allow-Origin",
                          "value": "*"
                        },
                        {
                          "key": "ETag",
                          "value": "W/\"170-XRVuXIPF7+VCCMKsG9KxnPc2P/A\""
                        },
                        {
                          "key": "Vary",
                          "value": "Accept-Encoding"
                        }
                      ],
                      "cookie": [],
                      "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": [\n        {\n            \"id\": \"9e5bb854-4c0e-4aa1-955b-66f08e429dbf\",\n            \"coyid\": \"E001\",\n            \"residentid\": \"RR1000000079\",\n            \"addr\": \"1 abc rd\",\n            \"timein\": \"2025-10-27T20:51:02.000Z\",\n            \"timeout\": \"2025-10-27T22:32:34.000Z\",\n            \"mvstatus\": \"Close\"\n        }\n    ],\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Generate",
              "item": [
                {
                  "name": "All Generate Requests",
                  "request": {
                    "method": "GET",
                    "header": [],
                    "url": {
                      "raw": ""
                    }
                  },
                  "response": []
                }
              ]
            },
            {
              "name": "Family",
              "item": [
                {
                  "name": "All Get Estate Property",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/estate/getallproperty",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "estate",
                        "getallproperty"
                      ]
                    },
                    "description": "Spools all property records"
                  },
                  "response": []
                },
                {
                  "name": "Get ALL Resident Property",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/getallresident",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "getallresident"
                      ]
                    },
                    "description": "Spools all property records"
                  },
                  "response": []
                },
                {
                  "name": "Get Family",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/getfamilymembers/FAM202510000000015",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "getfamilymembers",
                        "FAM202510000000015"
                      ]
                    },
                    "description": "Spools all family records"
                  },
                  "response": []
                },
                {
                  "name": "Get ALL Family",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/estatemgt/getallfamilymembers",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "estatemgt",
                        "getallfamilymembers"
                      ],
                      "query": [
                        {
                          "key": "nameit",
                          "value": "fem",
                          "disabled": true
                        },
                        {
                          "key": "email",
                          "value": "",
                          "disabled": true
                        },
                        {
                          "key": "familyid",
                          "value": "FAM202510000000022",
                          "disabled": true
                        },
                        {
                          "key": "fone",
                          "value": "",
                          "disabled": true
                        },
                        {
                          "key": "startdate",
                          "value": "",
                          "disabled": true
                        },
                        {
                          "key": "enddate",
                          "value": "",
                          "disabled": true
                        },
                        {
                          "key": "addr",
                          "value": null,
                          "disabled": true
                        }
                      ]
                    },
                    "description": "Spools all family records"
                  },
                  "response": []
                },
                {
                  "name": "Add Family",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data ={\r",
                          "    \"residentId\": \"RR1000000100\",\r",
                          "    \"firstName\": \"Femi\",\r",
                          "    \"othernames\": \"S\",\r",
                          "    \"surname\": \"Ogundele\",\r",
                          "    \"DoB\": \"2020-01-01\",        // YYYY-MM-DD\r",
                          "    \"phoneNo\": \"08023357199\",\r",
                          "    \"email\": \"fag@fag.com\",\r",
                          "    \"physicalAddr\": \"Trinity House\",\r",
                          "    \"gender\": \"Male\",   // 'Male', 'Female','Others'\r",
                          "    \"relationship\": \"child\", // 'self', 'spouse', 'parent', 'child', 'sibling', 'partner', 'fiance', 'grandparent', 'grandchild', 'uncle_aunt', 'nephew_niece', 'cousin', 'friend', 'colleague', 'legal_guardian', 'caregiver', 'in_law', 'step_family', 'other'\r",
                          "    \"employmentStatus\": \"Employed\",  //  'Employed', 'Self-Employed','Student','Retired','Unemployed'\r",
                          "    \"jobTitle\": \"Programmer\",\r",
                          "    \"employerName\": \"Norlics Digitals Ltd\",\r",
                          "}\r",
                          "\r",
                          "\r",
                          "\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "POST",
                    "header": [],
                    "body": {
                      "mode": "formdata",
                      "formdata": [
                        {
                          "key": "body",
                          "value": "{{body}}",
                          "type": "text"
                        },
                        {
                          "key": "file",
                          "type": "file",
                          "src": "/C:/tmp/jetstamp.png"
                        }
                      ]
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/addfamilymembers",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "addfamilymembers"
                      ]
                    },
                    "description": "Adds property\n\nPayload(formdata):  \nconst data ={  \n\"familyid\": \"FAM202510000000013\",  \n\"residentId\": \"RR1000000100\",  \n\"firstName\": \"Femi\",  \n\"othernames\": \"S\",  \n\"surname\": \"Ogundele\",  \n\"DoB\": \"01-01\", // MM-DD  \n\"phoneNo\": \"08023357199\",  \n\"email\": \"[fag@fag.com](https://mailto:fag@fag.com)\",  \n\"physicalAddr\": \"Trinity House\",  \n\"gender\": \"Male\", // 'Male', 'Female','Others'  \n\"relationship\": \"child\", // 'self', 'spouse', 'parent', 'child', 'sibling', 'partner', 'fiance', 'grandparent', 'grandchild', 'uncle_aunt', 'nephew_niece', 'cousin', 'friend', 'colleague', 'legal_guardian', 'caregiver', 'in_law', 'step_family', 'other'  \n\"employmentStatus\": \"Employed\", // 'Employed', 'Self-Employed','Student','Retired','Unemployed'  \n\"jobTitle\": \"Programmer\",  \n\"employerName\": \"Norlics Digitals Ltd\",  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Edit Family",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data ={\r",
                          "    \"familyid\": \"FAM202510000000013\",\r",
                          "    \"residentId\": \"RR1000000100\",\r",
                          "    \"firstName\": \"Femi\",\r",
                          "    \"othernames\": \"S\",\r",
                          "    \"surname\": \"Ogundele\",\r",
                          "    \"DoB\": \"2020-01-01\",        // YYYY-MM-DD\r",
                          "    \"phoneNo\": \"08023357199\",\r",
                          "    \"email\": \"fag@fag.com\",\r",
                          "    \"physicalAddr\": \"Trinity House\",\r",
                          "    \"gender\": \"Male\",   // 'Male', 'Female','Others'\r",
                          "    \"relationship\": \"child\", // 'self', 'spouse', 'parent', 'child', 'sibling', 'partner', 'fiance', 'grandparent', 'grandchild', 'uncle_aunt', 'nephew_niece', 'cousin', 'friend', 'colleague', 'legal_guardian', 'caregiver', 'in_law', 'step_family', 'other'\r",
                          "    \"employmentStatus\": \"Employed\",  //  'Employed', 'Self-Employed','Student','Retired','Unemployed'\r",
                          "    \"jobTitle\": \"Programmer\",\r",
                          "    \"employerName\": \"Norlics Digitals Ltd\",\r",
                          "}\r",
                          "\r",
                          "\r",
                          "\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "PUT",
                    "header": [],
                    "body": {
                      "mode": "formdata",
                      "formdata": [
                        {
                          "key": "body",
                          "value": "{{body}}",
                          "type": "text"
                        },
                        {
                          "key": "file",
                          "type": "file",
                          "src": "/C:/tmp/PAYE_ASSESSMENT_BILL_REAL_DIAMOND_2025.png"
                        }
                      ]
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/editfamilymembers",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "editfamilymembers"
                      ]
                    },
                    "description": "edit Resident Property\n\nPayload:\n\nconst data ={  \n\"familyid\": \"FAM202510000000013\",  \n\"residentId\": \"RR1000000100\",  \n\"firstName\": \"Femi\",  \n\"othernames\": \"S\",  \n\"surname\": \"Ogundele\",  \n\"DoB\": \"01-01\", // MM-DD  \n\"phoneNo\": \"08023357199\",  \n\"email\": \"[fag@fag.com](https://mailto:fag@fag.com)\",  \n\"physicalAddr\": \"Trinity House\",  \n\"gender\": \"Male\", // 'Male', 'Female','Others'  \n\"relationship\": \"child\", // 'self', 'spouse', 'parent', 'child', 'sibling', 'partner', 'fiance', 'grandparent', 'grandchild', 'uncle_aunt', 'nephew_niece', 'cousin', 'friend', 'colleague', 'legal_guardian', 'caregiver', 'in_law', 'step_family', 'other'  \n\"employmentStatus\": \"Employed\", // 'Employed', 'Self-Employed','Student','Retired','Unemployed'  \n\"jobTitle\": \"Programmer\",  \n\"employerName\": \"Norlics Digitals Ltd\",  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Family Member Status",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data = {\r",
                          "    \"familyid\": \"FAM202510000000013\",\r",
                          "    \"residentId\": \"RR1000000100\",\r",
                          "    \"statuz\": \"Archived\"     // 'Archived','Active'\r",
                          "}\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "PUT",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{{body}}\r\n",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/familymemberstatus",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "familymemberstatus"
                      ]
                    },
                    "description": "Family Member Status Change API\n\nPayload:  \nconst data = {  \n\"familyid\": \"FAM202510000000013\",  \n\"residentId\": \"RR1000000100\",  \n\"statuz\": \"Archived\" // 'Archived','Active'  \n}"
                  },
                  "response": []
                }
              ],
              "description": "Add property of resident"
            },
            {
              "name": "DomesticStaff",
              "item": [
                {
                  "name": "Get List of Domestic Staff",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/getdomesticstafflist",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "getdomesticstafflist"
                      ]
                    },
                    "description": "Spools all domestic staff records"
                  },
                  "response": []
                },
                {
                  "name": "Get Domestic Staff WorkTime",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/getdomesticstaffworktime",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "getdomesticstaffworktime"
                      ]
                    },
                    "description": "Spools all domestic staff records"
                  },
                  "response": []
                },
                {
                  "name": "Add Domestic Staff",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data ={\r",
                          "  \"residentId\": \"RR1000000100\",\r",
                          "  \"firstname\": \"Ann\",\r",
                          "  \"othername\": \"B\",\r",
                          "  \"surname\": \"Okougwa\",\r",
                          "  \"DoB\": \"2010-01-01\",\r",
                          "  \"fone\": \"08023357189\",\r",
                          "  \"email\": \"test@test.com\",\r",
                          "  \"gender\": \"Female\",   // 'Male', 'Female','Others'\r",
                          "  \"empStartDate\": \"2025-12-12\", // YYYY-MM-DD\r",
                          "  \"empRole\": \"Cook\",    // Pick from: {{BASE_URL}}/residenthead/getdomesticstafflist\r",
                          "  \"empType\": \"Live-Out\",    // 'Live-In', 'Live-Out'\r",
                          "  \"workTime\": \"Custom_Days\",    // Pick from: {{BASE_URL}}/residenthead/getdomesticstaffworktime\r",
                          "  \"cMonday\": true,      // Only set if workTime is Custom_Days\r",
                          "  \"cTuesday\": true,     // Only set if workTime is Custom_Days\r",
                          "  \"cWednesday\": true,   // Only set if workTime is Custom_Days\r",
                          "  \"cThursday\": false,   // Only set if workTime is Custom_Days\r",
                          "  \"cFriday\": true,      // Only set if workTime is Custom_Days\r",
                          "  \"cSaturday\": false,   // Only set if workTime is Custom_Days\r",
                          "  \"cSunday\": false      // Only set if workTime is Custom_Days\r",
                          "}\r",
                          "\r",
                          "\r",
                          "\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "POST",
                    "header": [],
                    "body": {
                      "mode": "formdata",
                      "formdata": [
                        {
                          "key": "body",
                          "value": "{{body}}",
                          "type": "text"
                        },
                        {
                          "key": "file",
                          "type": "file",
                          "src": "/C:/tmp/eduNext.png"
                        }
                      ]
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/adddomesticstaff",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "adddomesticstaff"
                      ]
                    },
                    "description": "Adds domestic staff\n\nPayload(formdata):  \n\nconst data ={  \n\"residentId\": \"RR1000000100\",  \n\"firstname\": \"Ann\",  \n\"othername\": \"B\",  \n\"surname\": \"Okougwa\",  \n\"DoB\": \"2010-01-01\",  \n\"fone\": \"08023357189\",  \n\"email\": \"[test@test.com](https://mailto:test@test.com)\",  \n\"gender\": \"Female\", // 'Male', 'Female','Others'  \n\"empStartDate\": \"2025-12-12\", // YYYY-MM-DD  \n\"empRole\": \"Cook\", // Pick from: {{BASE_URL}}/residenthead/getdomesticstafflist  \n\"empType\": \"Live-Out\", // 'Live-In', 'Live-Out'  \n\"workTime\": \"Custom_Days\", // Pick from: {{BASE_URL}}/residenthead/getdomesticstaffworktime  \n\"cMonday\": true, // Only set if workTime is Custom_Days  \n\"cTuesday\": true, // Only set if workTime is Custom_Days  \n\"cWednesday\": true, // Only set if workTime is Custom_Days  \n\"cThursday\": false, // Only set if workTime is Custom_Days  \n\"cFriday\": true, // Only set if workTime is Custom_Days  \n\"cSaturday\": false, // Only set if workTime is Custom_Days  \n\"cSunday\": false // Only set if workTime is Custom_Days  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Edit Domestic Staff",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data ={\r",
                          "    \"domesticStaffId\": \"DOM202510000000008\",\r",
                          "    \"residentId\": \"RR1000000100\",\r",
                          "    \"firstname\": \"Ola\",\r",
                          "    \"othername\": \"B\",\r",
                          "    \"surname\": \"Okuwa\",\r",
                          "    \"DoB\": \"2010-01-01\",\r",
                          "    \"fone\": \"08022257189\",\r",
                          "    \"email\": \"test@test.com\",\r",
                          "    \"gender\": \"Female\",   // 'Male', 'Female','Others'\r",
                          "    \"empStartDate\": \"2025-12-12\", // YYYY-MM-DD\r",
                          "    \"empRole\": \"Cook\",    // Pick from: {{BASE_URL}}/residenthead/getdomesticstafflist\r",
                          "    \"empType\": \"Live-Out\",    // 'Live-In', 'Live-Out'\r",
                          "    \"workTime\": \"Full_Week\",    // Pick from: {{BASE_URL}}/residenthead/getdomesticstaffworktime\r",
                          "    \"cMonday\": false,      // Only set if workTime is Custom_Days\r",
                          "    \"cTuesday\": false,     // Only set if workTime is Custom_Days\r",
                          "    \"cWednesday\": false,   // Only set if workTime is Custom_Days\r",
                          "    \"cThursday\": false,   // Only set if workTime is Custom_Days\r",
                          "    \"cFriday\": false,      // Only set if workTime is Custom_Days\r",
                          "    \"cSaturday\": false,   // Only set if workTime is Custom_Days\r",
                          "    \"cSunday\": false      // Only set if workTime is Custom_Days\r",
                          "}\r",
                          "\r",
                          "\r",
                          "\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "PUT",
                    "header": [],
                    "body": {
                      "mode": "formdata",
                      "formdata": [
                        {
                          "key": "body",
                          "value": "{{body}}",
                          "type": "text"
                        },
                        {
                          "key": "file",
                          "type": "file",
                          "src": "/C:/tmp/es1.png"
                        }
                      ]
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/editdomesticstaff",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "editdomesticstaff"
                      ]
                    },
                    "description": "edit domestic staff API\n\nPayload:\n\nconst data ={  \n\"domesticStaffId\": \"DOM202510000000008\",  \n\"residentId\": \"RR1000000100\",  \n\"firstname\": \"Ola\",  \n\"othername\": \"B\",  \n\"surname\": \"Okuwa\",  \n\"DoB\": \"2010-01-01\",  \n\"fone\": \"08022257189\",  \n\"email\": \"[test@test.com](https://mailto:test@test.com)\",  \n\"gender\": \"Female\", // 'Male', 'Female','Others'  \n\"empStartDate\": \"2025-12-12\", // YYYY-MM-DD  \n\"empRole\": \"Cook\", // Pick from: {{BASE_URL}}/residenthead/getdomesticstafflist  \n\"empType\": \"Live-Out\", // 'Live-In', 'Live-Out'  \n\"workTime\": \"Full_Week\", // Pick from: {{BASE_URL}}/residenthead/getdomesticstaffworktime  \n\"cMonday\": false, // Only set if workTime is Custom_Days  \n\"cTuesday\": false, // Only set if workTime is Custom_Days  \n\"cWednesday\": false, // Only set if workTime is Custom_Days  \n\"cThursday\": false, // Only set if workTime is Custom_Days  \n\"cFriday\": false, // Only set if workTime is Custom_Days  \n\"cSaturday\": false, // Only set if workTime is Custom_Days  \n\"cSunday\": false // Only set if workTime is Custom_Days  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Family Domestic Staff Status",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data = {\r",
                          "    \"domesticStaffId\": \"DOM202510000000008\",\r",
                          "    \"residentId\": \"RR1000000100\",\r",
                          "    \"statuz\": \"Archived\"     // 'Archived','Active'\r",
                          "}\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "PUT",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{{body}}\r\n",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/domesticstafftatus",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "domesticstafftatus"
                      ]
                    },
                    "description": "Domestic Staff Status Change API\n\nPayload:  \nconst data = {  \n\"domesticStaffId\": \"DOM202510000000008\",  \n\"residentId\": \"RR1000000100\",  \n\"statuz\": \"Archived\" // 'Archived','Active'  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Get Domestic Staff",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/residenthead/getdomesticstaff/DOM202510000000008",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "residenthead",
                        "getdomesticstaff",
                        "DOM202510000000008"
                      ]
                    },
                    "description": "Spools all domestic staff records"
                  },
                  "response": []
                },
                {
                  "name": "Get ALL Domestic Staff",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/estatemgt/getalldomesticstaff",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "estatemgt",
                        "getalldomesticstaff"
                      ],
                      "query": [
                        {
                          "key": "nameit",
                          "value": "fem",
                          "disabled": true
                        },
                        {
                          "key": "email",
                          "value": null,
                          "disabled": true
                        },
                        {
                          "key": "domesticid",
                          "value": "DOM202510000000009",
                          "disabled": true
                        },
                        {
                          "key": "fone",
                          "value": null,
                          "disabled": true
                        },
                        {
                          "key": "startdate",
                          "value": null,
                          "description": "YYYY-MM-DD",
                          "disabled": true
                        },
                        {
                          "key": "enddate",
                          "value": null,
                          "description": "YYYY-MM-DD",
                          "disabled": true
                        }
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                }
              ],
              "description": "Add domestic staff of resident"
            },
            {
              "name": "Estate Vendors",
              "item": [
                {
                  "name": "Get All Vendor",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/estateops/getallestatevendors",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "estateops",
                        "getallestatevendors"
                      ],
                      "query": [
                        {
                          "key": "addr",
                          "value": null,
                          "disabled": true
                        },
                        {
                          "key": "vname",
                          "value": "femi",
                          "disabled": true
                        },
                        {
                          "key": "shopname",
                          "value": null,
                          "disabled": true
                        },
                        {
                          "key": "fone",
                          "value": null,
                          "disabled": true
                        },
                        {
                          "key": "startdate",
                          "value": null,
                          "description": "YYYY-MM-DD",
                          "disabled": true
                        },
                        {
                          "key": "enddate",
                          "value": null,
                          "description": "YYYY-MM-DD",
                          "disabled": true
                        }
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                }
              ]
            },
            {
              "name": "Estate Operations",
              "item": [
                {
                  "name": "Vendor Profile",
                  "item": [
                    {
                      "name": "Add Vendor",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const data = {\r",
                              "    \"fullname\": \"RR1000000079\",\r",
                              "    \"phoneno\": \"08023357189\",\r",
                              "    \"whatsappno\": \"Only\",\r",
                              "    \"gender\": \"Male\",    // 'Male','Female','Others'\r",
                              "}\r",
                              "\r",
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Your RSA Public Key PEM here (replace with actual key)\r",
                              "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                              "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                              "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                              "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                              "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                              "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                              "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                              "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                              "      '0QIDAQAB\\n' +\r",
                              "      '-----END PUBLIC KEY-----\\n';\r",
                              "\r",
                              "// Helper: PEM to CryptoKey import\r",
                              "\r",
                              "async function importRsaPublicKey(pem) {\r",
                              "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                              "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                              "    let pemContents = pem.trim();\r",
                              "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                              "    const binaryDerString = atob(pemContents);\r",
                              "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                              "\r",
                              "    return crypto.subtle.importKey(\r",
                              "        \"spki\",\r",
                              "        binaryDer.buffer,\r",
                              "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                              "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                              "        false,\r",
                              "        [\"encrypt\"]\r",
                              "    );\r",
                              "}\r",
                              "\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "function b64EncodeUnicode(str) {\r",
                              "    return btoa(unescape(encodeURIComponent(str)));\r",
                              "}\r",
                              "\r",
                              "async function hybridEncrypt(publicKey, data) {\r",
                              "    const encoder = new TextEncoder();\r",
                              "\r",
                              "    // 1. Generate AES key\r",
                              "    const aesKey = await crypto.subtle.generateKey(\r",
                              "        { name: \"AES-GCM\", length: 256 },\r",
                              "        true,\r",
                              "        [\"encrypt\", \"decrypt\"]\r",
                              "    );\r",
                              "\r",
                              "    // 2. Encrypt data with AES-GCM\r",
                              "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                              "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                              "    const encryptedData = await crypto.subtle.encrypt(\r",
                              "        { name: \"AES-GCM\", iv },\r",
                              "        aesKey,\r",
                              "        encodedData\r",
                              "    );\r",
                              "\r",
                              "    // 3. Export AES key raw\r",
                              "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                              "\r",
                              "    // 4. Encrypt AES key with RSA-OAEP\r",
                              "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                              "        { name: \"RSA-OAEP\" },\r",
                              "        publicKey,\r",
                              "        rawAesKey\r",
                              "    );\r",
                              "\r",
                              "    return {\r",
                              "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                              "        iv: bufToB64(iv),\r",
                              "        encryptedData: bufToB64(encryptedData)\r",
                              "    };\r",
                              "}\r",
                              "\r",
                              "async function finalEncrypt(data) {\r",
                              "    console.log('data (finalEncrypt) => ', data)\r",
                              "    try {\r",
                              "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                              " console.log('publicKey => ', publicKey)\r",
                              "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                              "        console.log('encryptedPayload => ', encryptedPayload)\r",
                              "\r",
                              "        // Serialize final payload as JSON string\r",
                              "        const finalPayload = JSON.stringify({ \r",
                              "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                              "            iv: encryptedPayload.iv,\r",
                              "            encryptedData: encryptedPayload.encryptedData\r",
                              "        });\r",
                              "        console.log('finalPayload => ', finalPayload)\r",
                              "\r",
                              "        // Create hash input and hash it (same as before)\r",
                              "        // const inputToHash = btoa(finalPayload) + secret;\r",
                              "        // const inputToHash = finalPayload + secret;\r",
                              "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                              "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                              "     \r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(inputToHash);\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "console.log('dataToHash => ', dataToHash)\r",
                              "console.log('hash => ', hash)\r",
                              "        // Set headers and body in Postman\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "        pm.variables.set('body', finalPayload);\r",
                              "\r",
                              "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                              "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Encryption error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await finalEncrypt(data);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        },
                        {
                          "listen": "test",
                          "script": {
                            "exec": [
                              "pm.globals.set(\"token\", \" \");\r",
                              "\r",
                              "var jsonData = pm.response.json();\r",
                              "console.log('jsonData ->', jsonData);\r",
                              "\r",
                              "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                              "console.log('vData -> ', vData);\r",
                              "\r",
                              "let getToken = vData.access_token;\r",
                              "pm.globals.set(\"token\", getToken);\r",
                              "\r",
                              "// log fresh value directly (donâ€™t rely on globals here)\r",
                              "console.log(\"Auth Token (fresh):\", getToken);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                          "mode": "formdata",
                          "formdata": [
                            {
                              "key": "body",
                              "value": "{{body}}",
                              "type": "text"
                            },
                            {
                              "key": "file",
                              "type": "file",
                              "src": "/C:/tmp/jetstamp.png"
                            }
                          ]
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estateops/addestatevendors",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estateops",
                            "addestatevendors"
                          ]
                        },
                        "description": "Login API"
                      },
                      "response": []
                    },
                    {
                      "name": "Edit Vendor",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const data = {\r",
                              "    \"id\": \"2ef26b7e-0a0c-444d-bced-5c91809fe9c3\",\r",
                              "    \"vendorid\": \"VV20251000000034\",\r",
                              "    \"fullname\": \"Alex Onu\",\r",
                              "    \"phoneno\": \"08023357189\",\r",
                              "    \"whatsappno\": \"Only\",\r",
                              "    \"gender\": \"Male\",    // 'Male','Female','Others'\r",
                              "}\r",
                              "\r",
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Your RSA Public Key PEM here (replace with actual key)\r",
                              "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                              "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                              "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                              "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                              "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                              "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                              "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                              "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                              "      '0QIDAQAB\\n' +\r",
                              "      '-----END PUBLIC KEY-----\\n';\r",
                              "\r",
                              "// Helper: PEM to CryptoKey import\r",
                              "\r",
                              "async function importRsaPublicKey(pem) {\r",
                              "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                              "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                              "    let pemContents = pem.trim();\r",
                              "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                              "    const binaryDerString = atob(pemContents);\r",
                              "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                              "\r",
                              "    return crypto.subtle.importKey(\r",
                              "        \"spki\",\r",
                              "        binaryDer.buffer,\r",
                              "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                              "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                              "        false,\r",
                              "        [\"encrypt\"]\r",
                              "    );\r",
                              "}\r",
                              "\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "function b64EncodeUnicode(str) {\r",
                              "    return btoa(unescape(encodeURIComponent(str)));\r",
                              "}\r",
                              "\r",
                              "async function hybridEncrypt(publicKey, data) {\r",
                              "    const encoder = new TextEncoder();\r",
                              "\r",
                              "    // 1. Generate AES key\r",
                              "    const aesKey = await crypto.subtle.generateKey(\r",
                              "        { name: \"AES-GCM\", length: 256 },\r",
                              "        true,\r",
                              "        [\"encrypt\", \"decrypt\"]\r",
                              "    );\r",
                              "\r",
                              "    // 2. Encrypt data with AES-GCM\r",
                              "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                              "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                              "    const encryptedData = await crypto.subtle.encrypt(\r",
                              "        { name: \"AES-GCM\", iv },\r",
                              "        aesKey,\r",
                              "        encodedData\r",
                              "    );\r",
                              "\r",
                              "    // 3. Export AES key raw\r",
                              "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                              "\r",
                              "    // 4. Encrypt AES key with RSA-OAEP\r",
                              "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                              "        { name: \"RSA-OAEP\" },\r",
                              "        publicKey,\r",
                              "        rawAesKey\r",
                              "    );\r",
                              "\r",
                              "    return {\r",
                              "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                              "        iv: bufToB64(iv),\r",
                              "        encryptedData: bufToB64(encryptedData)\r",
                              "    };\r",
                              "}\r",
                              "\r",
                              "async function finalEncrypt(data) {\r",
                              "    console.log('data (finalEncrypt) => ', data)\r",
                              "    try {\r",
                              "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                              " console.log('publicKey => ', publicKey)\r",
                              "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                              "        console.log('encryptedPayload => ', encryptedPayload)\r",
                              "\r",
                              "        // Serialize final payload as JSON string\r",
                              "        const finalPayload = JSON.stringify({ \r",
                              "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                              "            iv: encryptedPayload.iv,\r",
                              "            encryptedData: encryptedPayload.encryptedData\r",
                              "        });\r",
                              "        console.log('finalPayload => ', finalPayload)\r",
                              "\r",
                              "        // Create hash input and hash it (same as before)\r",
                              "        // const inputToHash = btoa(finalPayload) + secret;\r",
                              "        // const inputToHash = finalPayload + secret;\r",
                              "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                              "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                              "     \r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(inputToHash);\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "console.log('dataToHash => ', dataToHash)\r",
                              "console.log('hash => ', hash)\r",
                              "        // Set headers and body in Postman\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "        pm.variables.set('body', finalPayload);\r",
                              "\r",
                              "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                              "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Encryption error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await finalEncrypt(data);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        },
                        {
                          "listen": "test",
                          "script": {
                            "exec": [
                              "pm.globals.set(\"token\", \" \");\r",
                              "\r",
                              "var jsonData = pm.response.json();\r",
                              "console.log('jsonData ->', jsonData);\r",
                              "\r",
                              "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                              "console.log('vData -> ', vData);\r",
                              "\r",
                              "let getToken = vData.access_token;\r",
                              "pm.globals.set(\"token\", getToken);\r",
                              "\r",
                              "// log fresh value directly (donâ€™t rely on globals here)\r",
                              "console.log(\"Auth Token (fresh):\", getToken);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "request": {
                        "method": "PUT",
                        "header": [],
                        "body": {
                          "mode": "formdata",
                          "formdata": [
                            {
                              "key": "body",
                              "value": "{{body}}",
                              "type": "text"
                            },
                            {
                              "key": "file",
                              "type": "file",
                              "src": "/C:/tmp/Screenshot 2025-04-01 100559.png"
                            }
                          ]
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estateops/editestatevendors",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estateops",
                            "editestatevendors"
                          ]
                        },
                        "description": "Login API"
                      },
                      "response": []
                    },
                    {
                      "name": "Get Vendor",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estateops/getestatevendors/VV20251000000034",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estateops",
                            "getestatevendors",
                            "VV20251000000034"
                          ]
                        },
                        "description": "Spools all group records"
                      },
                      "response": []
                    },
                    {
                      "name": "Get All Vendor",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estateops/getestatevendors/VV20251000000034",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estateops",
                            "getestatevendors",
                            "VV20251000000034"
                          ]
                        },
                        "description": "Spools all group records"
                      },
                      "response": []
                    }
                  ]
                },
                {
                  "name": "Vendor Shop",
                  "item": [
                    {
                      "name": "Get Resident",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estateops/getestatevendorsshop/102e2750-2560-44c3-bcb7-8d790c79e1c3",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estateops",
                            "getestatevendorsshop",
                            "102e2750-2560-44c3-bcb7-8d790c79e1c3"
                          ]
                        },
                        "description": "Spools all group records"
                      },
                      "response": []
                    },
                    {
                      "name": "Add Shop",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const data = {\r",
                              "    \"vendorid\": \"VV20251000000022\",\r",
                              "    \"shopname\": \"ABC Fashions\",\r",
                              "    \"shopcategory\": \"Mini\",         // Small, Mini, Large\r",
                              "    \"bizregno\": \"RC12345\",\r",
                              "    \"zone\": \"Main\",\r",
                              "    \"address\": \"CC 9, Ado Lane\",\r",
                              "    \"descriptn\": \"test\",\r",
                              "}\r",
                              "\r",
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Your RSA Public Key PEM here (replace with actual key)\r",
                              "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                              "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                              "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                              "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                              "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                              "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                              "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                              "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                              "      '0QIDAQAB\\n' +\r",
                              "      '-----END PUBLIC KEY-----\\n';\r",
                              "\r",
                              "// Helper: PEM to CryptoKey import\r",
                              "\r",
                              "async function importRsaPublicKey(pem) {\r",
                              "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                              "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                              "    let pemContents = pem.trim();\r",
                              "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                              "    const binaryDerString = atob(pemContents);\r",
                              "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                              "\r",
                              "    return crypto.subtle.importKey(\r",
                              "        \"spki\",\r",
                              "        binaryDer.buffer,\r",
                              "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                              "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                              "        false,\r",
                              "        [\"encrypt\"]\r",
                              "    );\r",
                              "}\r",
                              "\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "function b64EncodeUnicode(str) {\r",
                              "    return btoa(unescape(encodeURIComponent(str)));\r",
                              "}\r",
                              "\r",
                              "async function hybridEncrypt(publicKey, data) {\r",
                              "    const encoder = new TextEncoder();\r",
                              "\r",
                              "    // 1. Generate AES key\r",
                              "    const aesKey = await crypto.subtle.generateKey(\r",
                              "        { name: \"AES-GCM\", length: 256 },\r",
                              "        true,\r",
                              "        [\"encrypt\", \"decrypt\"]\r",
                              "    );\r",
                              "\r",
                              "    // 2. Encrypt data with AES-GCM\r",
                              "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                              "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                              "    const encryptedData = await crypto.subtle.encrypt(\r",
                              "        { name: \"AES-GCM\", iv },\r",
                              "        aesKey,\r",
                              "        encodedData\r",
                              "    );\r",
                              "\r",
                              "    // 3. Export AES key raw\r",
                              "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                              "\r",
                              "    // 4. Encrypt AES key with RSA-OAEP\r",
                              "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                              "        { name: \"RSA-OAEP\" },\r",
                              "        publicKey,\r",
                              "        rawAesKey\r",
                              "    );\r",
                              "\r",
                              "    return {\r",
                              "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                              "        iv: bufToB64(iv),\r",
                              "        encryptedData: bufToB64(encryptedData)\r",
                              "    };\r",
                              "}\r",
                              "\r",
                              "async function finalEncrypt(data) {\r",
                              "    console.log('data (finalEncrypt) => ', data)\r",
                              "    try {\r",
                              "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                              " console.log('publicKey => ', publicKey)\r",
                              "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                              "        console.log('encryptedPayload => ', encryptedPayload)\r",
                              "\r",
                              "        // Serialize final payload as JSON string\r",
                              "        const finalPayload = JSON.stringify({ \r",
                              "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                              "            iv: encryptedPayload.iv,\r",
                              "            encryptedData: encryptedPayload.encryptedData\r",
                              "        });\r",
                              "        console.log('finalPayload => ', finalPayload)\r",
                              "\r",
                              "        // Create hash input and hash it (same as before)\r",
                              "        // const inputToHash = btoa(finalPayload) + secret;\r",
                              "        // const inputToHash = finalPayload + secret;\r",
                              "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                              "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                              "     \r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(inputToHash);\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "console.log('dataToHash => ', dataToHash)\r",
                              "console.log('hash => ', hash)\r",
                              "        // Set headers and body in Postman\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "        pm.variables.set('body', finalPayload);\r",
                              "\r",
                              "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                              "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Encryption error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await finalEncrypt(data);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        },
                        {
                          "listen": "test",
                          "script": {
                            "exec": [
                              "pm.globals.set(\"token\", \" \");\r",
                              "\r",
                              "var jsonData = pm.response.json();\r",
                              "console.log('jsonData ->', jsonData);\r",
                              "\r",
                              "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                              "console.log('vData -> ', vData);\r",
                              "\r",
                              "let getToken = vData.access_token;\r",
                              "pm.globals.set(\"token\", getToken);\r",
                              "\r",
                              "// log fresh value directly (donâ€™t rely on globals here)\r",
                              "console.log(\"Auth Token (fresh):\", getToken);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "{{body}}\r\n",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/resident/addestatevendorsshop",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "resident",
                            "addestatevendorsshop"
                          ]
                        },
                        "description": "Login API"
                      },
                      "response": []
                    },
                    {
                      "name": "Edit Shop",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const data = {\r",
                              "    \"id\": \"951371ba-4b04-47df-b5f1-76b03171d051\",\r",
                              "    \"vendorid\": \"VV20251000000034\",\r",
                              "    \"shopname\": \"ASIN Fashions\",\r",
                              "    \"shopcategory\": \"Mini\",         // Small, Mini, Large\r",
                              "    \"bizregno\": \"RC1s12345\",\r",
                              "    \"zone\": \"Main\",\r",
                              "    \"address\": \"CC 39, Ado Lane\",\r",
                              "    \"descriptn\": \"1test\",\r",
                              "}\r",
                              "\r",
                              "\r",
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Your RSA Public Key PEM here (replace with actual key)\r",
                              "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                              "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                              "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                              "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                              "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                              "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                              "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                              "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                              "      '0QIDAQAB\\n' +\r",
                              "      '-----END PUBLIC KEY-----\\n';\r",
                              "\r",
                              "// Helper: PEM to CryptoKey import\r",
                              "\r",
                              "async function importRsaPublicKey(pem) {\r",
                              "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                              "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                              "    let pemContents = pem.trim();\r",
                              "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                              "    const binaryDerString = atob(pemContents);\r",
                              "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                              "\r",
                              "    return crypto.subtle.importKey(\r",
                              "        \"spki\",\r",
                              "        binaryDer.buffer,\r",
                              "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                              "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                              "        false,\r",
                              "        [\"encrypt\"]\r",
                              "    );\r",
                              "}\r",
                              "\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "function b64EncodeUnicode(str) {\r",
                              "    return btoa(unescape(encodeURIComponent(str)));\r",
                              "}\r",
                              "\r",
                              "async function hybridEncrypt(publicKey, data) {\r",
                              "    const encoder = new TextEncoder();\r",
                              "\r",
                              "    // 1. Generate AES key\r",
                              "    const aesKey = await crypto.subtle.generateKey(\r",
                              "        { name: \"AES-GCM\", length: 256 },\r",
                              "        true,\r",
                              "        [\"encrypt\", \"decrypt\"]\r",
                              "    );\r",
                              "\r",
                              "    // 2. Encrypt data with AES-GCM\r",
                              "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                              "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                              "    const encryptedData = await crypto.subtle.encrypt(\r",
                              "        { name: \"AES-GCM\", iv },\r",
                              "        aesKey,\r",
                              "        encodedData\r",
                              "    );\r",
                              "\r",
                              "    // 3. Export AES key raw\r",
                              "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                              "\r",
                              "    // 4. Encrypt AES key with RSA-OAEP\r",
                              "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                              "        { name: \"RSA-OAEP\" },\r",
                              "        publicKey,\r",
                              "        rawAesKey\r",
                              "    );\r",
                              "\r",
                              "    return {\r",
                              "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                              "        iv: bufToB64(iv),\r",
                              "        encryptedData: bufToB64(encryptedData)\r",
                              "    };\r",
                              "}\r",
                              "\r",
                              "async function finalEncrypt(data) {\r",
                              "    console.log('data (finalEncrypt) => ', data)\r",
                              "    try {\r",
                              "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                              " console.log('publicKey => ', publicKey)\r",
                              "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                              "        console.log('encryptedPayload => ', encryptedPayload)\r",
                              "\r",
                              "        // Serialize final payload as JSON string\r",
                              "        const finalPayload = JSON.stringify({ \r",
                              "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                              "            iv: encryptedPayload.iv,\r",
                              "            encryptedData: encryptedPayload.encryptedData\r",
                              "        });\r",
                              "        console.log('finalPayload => ', finalPayload)\r",
                              "\r",
                              "        // Create hash input and hash it (same as before)\r",
                              "        // const inputToHash = btoa(finalPayload) + secret;\r",
                              "        // const inputToHash = finalPayload + secret;\r",
                              "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                              "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                              "     \r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(inputToHash);\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "console.log('dataToHash => ', dataToHash)\r",
                              "console.log('hash => ', hash)\r",
                              "        // Set headers and body in Postman\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "        pm.variables.set('body', finalPayload);\r",
                              "\r",
                              "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                              "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Encryption error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await finalEncrypt(data);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        },
                        {
                          "listen": "test",
                          "script": {
                            "exec": [
                              "pm.globals.set(\"token\", \" \");\r",
                              "\r",
                              "var jsonData = pm.response.json();\r",
                              "console.log('jsonData ->', jsonData);\r",
                              "\r",
                              "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                              "console.log('vData -> ', vData);\r",
                              "\r",
                              "let getToken = vData.access_token;\r",
                              "pm.globals.set(\"token\", getToken);\r",
                              "\r",
                              "// log fresh value directly (donâ€™t rely on globals here)\r",
                              "console.log(\"Auth Token (fresh):\", getToken);\r",
                              ""
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "request": {
                        "method": "PUT",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "{{body}}\r\n",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estateops/editestatevendorsshop",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estateops",
                            "editestatevendorsshop"
                          ]
                        },
                        "description": "Login API"
                      },
                      "response": []
                    },
                    {
                      "name": "Get All Movement",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getallresidentmovement",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getallresidentmovement"
                          ],
                          "query": [
                            {
                              "key": "addr",
                              "value": "abf",
                              "disabled": true
                            },
                            {
                              "key": "status",
                              "value": "Close",
                              "description": "Close or Open",
                              "disabled": true
                            }
                          ]
                        },
                        "description": "Spools all group records"
                      },
                      "response": [
                        {
                          "name": "Get Movement",
                          "originalRequest": {
                            "method": "GET",
                            "header": [],
                            "url": {
                              "raw": "{{BASE_URL}}/estatemgt/getallresidentmovement",
                              "host": [
                                "{{BASE_URL}}"
                              ],
                              "path": [
                                "estatemgt",
                                "getallresidentmovement"
                              ],
                              "query": [
                                {
                                  "key": "addr",
                                  "value": "abf",
                                  "disabled": true
                                },
                                {
                                  "key": "status",
                                  "value": "Close",
                                  "description": "Close or Open",
                                  "disabled": true
                                }
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": "Text",
                          "header": [
                            {
                              "key": "Server",
                              "value": "nginx/1.14.1"
                            },
                            {
                              "key": "Date",
                              "value": "Tue, 28 Oct 2025 00:08:14 GMT"
                            },
                            {
                              "key": "Content-Type",
                              "value": "application/json; charset=utf-8"
                            },
                            {
                              "key": "Content-Length",
                              "value": "525"
                            },
                            {
                              "key": "Connection",
                              "value": "keep-alive"
                            },
                            {
                              "key": "X-Powered-By",
                              "value": "Express"
                            },
                            {
                              "key": "Access-Control-Allow-Origin",
                              "value": "*"
                            },
                            {
                              "key": "ETag",
                              "value": "W/\"20d-LkYChzAbDkl176MChzH6WkEbo70\""
                            },
                            {
                              "key": "Vary",
                              "value": "Accept-Encoding"
                            }
                          ],
                          "cookie": [],
                          "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": {\n        \"data\": [\n            {\n                \"id\": \"9e5bb854-4c0e-4aa1-955b-66f08e429dbf\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"addr\": \"1 abc rd\",\n                \"timein\": \"2025-10-27T20:51:02.000Z\",\n                \"timeout\": \"2025-10-27T22:32:34.000Z\",\n                \"mvstatus\": \"Close\",\n                \"assigneddays\": []\n            }\n        ],\n        \"summary\": {\n            \"total_movement\": 1,\n            \"opened_status\": 0,\n            \"closed_status\": 1\n        },\n        \"pagination\": {\n            \"total\": 1,\n            \"page\": 1,\n            \"pageSize\": 20,\n            \"totalPages\": 1\n        }\n    },\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                        }
                      ]
                    },
                    {
                      "name": "Get Movement",
                      "event": [
                        {
                          "listen": "prerequest",
                          "script": {
                            "exec": [
                              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                              "\r",
                              "// Helpers\r",
                              "function bufToB64(buf) {\r",
                              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                              "}\r",
                              "\r",
                              "async function secretOnly() {\r",
                              "    try {\r",
                              "        // 1. Encode secret directly\r",
                              "        const encoder = new TextEncoder();\r",
                              "        const dataToHash = encoder.encode(secret);\r",
                              "\r",
                              "        // 2. Hash it with SHA-256\r",
                              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                              "        const hash = bufToB64(hashBuffer);\r",
                              "\r",
                              "        // 3. Add header\r",
                              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                              "\r",
                              "        console.log('ðŸ” Secret-only hash:', hash);\r",
                              "    } catch (err) {\r",
                              "        console.error('Hashing error:', err);\r",
                              "    }\r",
                              "};\r",
                              "\r",
                              "await secretOnly();"
                            ],
                            "type": "text/javascript",
                            "packages": {},
                            "requests": {}
                          }
                        }
                      ],
                      "protocolProfileBehavior": {
                        "disableBodyPruning": true
                      },
                      "request": {
                        "method": "GET",
                        "header": [],
                        "body": {
                          "mode": "raw",
                          "raw": "",
                          "options": {
                            "raw": {
                              "language": "json"
                            }
                          }
                        },
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getresidentmovement/RR1000000079",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getresidentmovement",
                            "RR1000000079"
                          ]
                        },
                        "description": "Spools all group records"
                      },
                      "response": [
                        {
                          "name": "Get Movement Copy",
                          "originalRequest": {
                            "method": "GET",
                            "header": [],
                            "url": {
                              "raw": "{{BASE_URL}}/estatemgt/getresidentmovement/RR1000000079",
                              "host": [
                                "{{BASE_URL}}"
                              ],
                              "path": [
                                "estatemgt",
                                "getresidentmovement",
                                "RR1000000079"
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": "Text",
                          "header": [
                            {
                              "key": "Server",
                              "value": "nginx/1.14.1"
                            },
                            {
                              "key": "Date",
                              "value": "Mon, 27 Oct 2025 23:59:04 GMT"
                            },
                            {
                              "key": "Content-Type",
                              "value": "application/json; charset=utf-8"
                            },
                            {
                              "key": "Content-Length",
                              "value": "368"
                            },
                            {
                              "key": "Connection",
                              "value": "keep-alive"
                            },
                            {
                              "key": "X-Powered-By",
                              "value": "Express"
                            },
                            {
                              "key": "Access-Control-Allow-Origin",
                              "value": "*"
                            },
                            {
                              "key": "ETag",
                              "value": "W/\"170-XRVuXIPF7+VCCMKsG9KxnPc2P/A\""
                            },
                            {
                              "key": "Vary",
                              "value": "Accept-Encoding"
                            }
                          ],
                          "cookie": [],
                          "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": [\n        {\n            \"id\": \"9e5bb854-4c0e-4aa1-955b-66f08e429dbf\",\n            \"coyid\": \"E001\",\n            \"residentid\": \"RR1000000079\",\n            \"addr\": \"1 abc rd\",\n            \"timein\": \"2025-10-27T20:51:02.000Z\",\n            \"timeout\": \"2025-10-27T22:32:34.000Z\",\n            \"mvstatus\": \"Close\"\n        }\n    ],\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "Status Token Change",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data = {\r",
                          "    \"id\": \"acfbeb23-b4c6-4e56-ae6a-88ce42c85bee\",\r",
                          "    \"residentid\": \"RR1000000079\",\r",
                          "    \"statuz\": \"Revoked\"     // 'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'\r",
                          "}\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "PUT",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{{body}}\r\n",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/statustokenchange",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "statustokenchange"
                      ]
                    },
                    "description": "Login API"
                  },
                  "response": []
                },
                {
                  "name": "Get Token Usage",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/getresident/RR1000000077",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "getresident",
                        "RR1000000077"
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                },
                {
                  "name": "Get All Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/getallresidenttoken",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "getallresidenttoken"
                      ],
                      "query": [
                        {
                          "key": "addr",
                          "value": "abf",
                          "disabled": true
                        },
                        {
                          "key": "status",
                          "value": "Used",
                          "description": "'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'\n",
                          "disabled": true
                        },
                        {
                          "key": "residentid",
                          "value": "RR0000120202",
                          "disabled": true
                        }
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": [
                    {
                      "name": "Get Movement",
                      "originalRequest": {
                        "method": "GET",
                        "header": [],
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getallresidentmovement",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getallresidentmovement"
                          ],
                          "query": [
                            {
                              "key": "addr",
                              "value": "abf",
                              "disabled": true
                            },
                            {
                              "key": "status",
                              "value": "Close",
                              "description": "Close or Open",
                              "disabled": true
                            }
                          ]
                        }
                      },
                      "status": "OK",
                      "code": 200,
                      "_postman_previewlanguage": "Text",
                      "header": [
                        {
                          "key": "Server",
                          "value": "nginx/1.14.1"
                        },
                        {
                          "key": "Date",
                          "value": "Tue, 28 Oct 2025 00:08:14 GMT"
                        },
                        {
                          "key": "Content-Type",
                          "value": "application/json; charset=utf-8"
                        },
                        {
                          "key": "Content-Length",
                          "value": "525"
                        },
                        {
                          "key": "Connection",
                          "value": "keep-alive"
                        },
                        {
                          "key": "X-Powered-By",
                          "value": "Express"
                        },
                        {
                          "key": "Access-Control-Allow-Origin",
                          "value": "*"
                        },
                        {
                          "key": "ETag",
                          "value": "W/\"20d-LkYChzAbDkl176MChzH6WkEbo70\""
                        },
                        {
                          "key": "Vary",
                          "value": "Accept-Encoding"
                        }
                      ],
                      "cookie": [],
                      "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": {\n        \"data\": [\n            {\n                \"id\": \"9e5bb854-4c0e-4aa1-955b-66f08e429dbf\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"addr\": \"1 abc rd\",\n                \"timein\": \"2025-10-27T20:51:02.000Z\",\n                \"timeout\": \"2025-10-27T22:32:34.000Z\",\n                \"mvstatus\": \"Close\",\n                \"assigneddays\": []\n            }\n        ],\n        \"summary\": {\n            \"total_movement\": 1,\n            \"opened_status\": 0,\n            \"closed_status\": 1\n        },\n        \"pagination\": {\n            \"total\": 1,\n            \"page\": 1,\n            \"pageSize\": 20,\n            \"totalPages\": 1\n        }\n    },\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                    }
                  ]
                },
                {
                  "name": "Get Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/estatemgt/getresidenttoken/RR1000000079",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "estatemgt",
                        "getresidenttoken",
                        "RR1000000079"
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": [
                    {
                      "name": "Get Movement Copy",
                      "originalRequest": {
                        "method": "GET",
                        "header": [],
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getresidentmovement/RR1000000079",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getresidentmovement",
                            "RR1000000079"
                          ]
                        }
                      },
                      "status": "OK",
                      "code": 200,
                      "_postman_previewlanguage": "Text",
                      "header": [
                        {
                          "key": "Server",
                          "value": "nginx/1.14.1"
                        },
                        {
                          "key": "Date",
                          "value": "Mon, 27 Oct 2025 23:59:04 GMT"
                        },
                        {
                          "key": "Content-Type",
                          "value": "application/json; charset=utf-8"
                        },
                        {
                          "key": "Content-Length",
                          "value": "368"
                        },
                        {
                          "key": "Connection",
                          "value": "keep-alive"
                        },
                        {
                          "key": "X-Powered-By",
                          "value": "Express"
                        },
                        {
                          "key": "Access-Control-Allow-Origin",
                          "value": "*"
                        },
                        {
                          "key": "ETag",
                          "value": "W/\"170-XRVuXIPF7+VCCMKsG9KxnPc2P/A\""
                        },
                        {
                          "key": "Vary",
                          "value": "Accept-Encoding"
                        }
                      ],
                      "cookie": [],
                      "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": [\n        {\n            \"id\": \"9e5bb854-4c0e-4aa1-955b-66f08e429dbf\",\n            \"coyid\": \"E001\",\n            \"residentid\": \"RR1000000079\",\n            \"addr\": \"1 abc rd\",\n            \"timein\": \"2025-10-27T20:51:02.000Z\",\n            \"timeout\": \"2025-10-27T22:32:34.000Z\",\n            \"mvstatus\": \"Close\"\n        }\n    ],\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Get Resident Profile",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                      "\r",
                      "// Helpers\r",
                      "function bufToB64(buf) {\r",
                      "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                      "}\r",
                      "\r",
                      "async function secretOnly() {\r",
                      "    try {\r",
                      "        // 1. Encode secret directly\r",
                      "        const encoder = new TextEncoder();\r",
                      "        const dataToHash = encoder.encode(secret);\r",
                      "\r",
                      "        // 2. Hash it with SHA-256\r",
                      "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                      "        const hash = bufToB64(hashBuffer);\r",
                      "\r",
                      "        // 3. Add header\r",
                      "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                      "\r",
                      "        console.log('ðŸ” Secret-only hash:', hash);\r",
                      "    } catch (err) {\r",
                      "        console.error('Hashing error:', err);\r",
                      "    }\r",
                      "};\r",
                      "\r",
                      "await secretOnly();"
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "protocolProfileBehavior": {
                "disableBodyPruning": true
              },
              "request": {
                "method": "GET",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{BASE_URL}}/resident/getresident/RR1100000007",
                  "host": [
                    "{{BASE_URL}}"
                  ],
                  "path": [
                    "resident",
                    "getresident",
                    "RR1100000007"
                  ]
                },
                "description": "Spools all group records"
              },
              "response": []
            },
            {
              "name": "Edit Resident Profile",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const data ={\r",
                      "    \"residentid\": \"RR1000000077\",\r",
                      "    \"firstname\": \"Okonkwo1\",\r",
                      "    \"lastname\": \"Nwabueze1\",\r",
                      "    \"middlename\": \"G\",\r",
                      "    \"phone\": \"080233570189\",\r",
                      "    \"email\": \"nwabuezeokonkwo0@gmail.com\",\r",
                      "    \"whatsappfone\": \"080233571189\",\r",
                      "    \"dob\": \"2002-01-01\",\r",
                      "    \"gender\": \"Male\",\r",
                      "    \"maritalstatus\": \"Single\",\r",
                      "    \"estateaddr\": \"1 abc rd\",\r",
                      "    \"formeraddr\": \"1 xyz road\",\r",
                      "    \"workplacename\": \"ABC Nig L\",\r",
                      "    \"workplacepost\": \"General Manager\",\r",
                      "    \"workplaceaddr\": \"1 fgh road\",\r",
                      "}\r",
                      "\r",
                      "\r",
                      "\r",
                      "\r",
                      "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                      "\r",
                      "// Your RSA Public Key PEM here (replace with actual key)\r",
                      "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                      "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                      "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                      "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                      "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                      "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                      "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                      "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                      "      '0QIDAQAB\\n' +\r",
                      "      '-----END PUBLIC KEY-----\\n';\r",
                      "\r",
                      "// Helper: PEM to CryptoKey import\r",
                      "\r",
                      "async function importRsaPublicKey(pem) {\r",
                      "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                      "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                      "    let pemContents = pem.trim();\r",
                      "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                      "    const binaryDerString = atob(pemContents);\r",
                      "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                      "\r",
                      "    return crypto.subtle.importKey(\r",
                      "        \"spki\",\r",
                      "        binaryDer.buffer,\r",
                      "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                      "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                      "        false,\r",
                      "        [\"encrypt\"]\r",
                      "    );\r",
                      "}\r",
                      "\r",
                      "function bufToB64(buf) {\r",
                      "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                      "}\r",
                      "\r",
                      "function b64EncodeUnicode(str) {\r",
                      "    return btoa(unescape(encodeURIComponent(str)));\r",
                      "}\r",
                      "\r",
                      "async function hybridEncrypt(publicKey, data) {\r",
                      "    const encoder = new TextEncoder();\r",
                      "\r",
                      "    // 1. Generate AES key\r",
                      "    const aesKey = await crypto.subtle.generateKey(\r",
                      "        { name: \"AES-GCM\", length: 256 },\r",
                      "        true,\r",
                      "        [\"encrypt\", \"decrypt\"]\r",
                      "    );\r",
                      "\r",
                      "    // 2. Encrypt data with AES-GCM\r",
                      "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                      "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                      "    const encryptedData = await crypto.subtle.encrypt(\r",
                      "        { name: \"AES-GCM\", iv },\r",
                      "        aesKey,\r",
                      "        encodedData\r",
                      "    );\r",
                      "\r",
                      "    // 3. Export AES key raw\r",
                      "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                      "\r",
                      "    // 4. Encrypt AES key with RSA-OAEP\r",
                      "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                      "        { name: \"RSA-OAEP\" },\r",
                      "        publicKey,\r",
                      "        rawAesKey\r",
                      "    );\r",
                      "\r",
                      "    return {\r",
                      "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                      "        iv: bufToB64(iv),\r",
                      "        encryptedData: bufToB64(encryptedData)\r",
                      "    };\r",
                      "}\r",
                      "\r",
                      "async function finalEncrypt(data) {\r",
                      "    console.log('data (finalEncrypt) => ', data)\r",
                      "    try {\r",
                      "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                      " console.log('publicKey => ', publicKey)\r",
                      "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                      "        console.log('encryptedPayload => ', encryptedPayload)\r",
                      "\r",
                      "        // Serialize final payload as JSON string\r",
                      "        const finalPayload = JSON.stringify({ \r",
                      "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                      "            iv: encryptedPayload.iv,\r",
                      "            encryptedData: encryptedPayload.encryptedData\r",
                      "        });\r",
                      "        console.log('finalPayload => ', finalPayload)\r",
                      "\r",
                      "        // Create hash input and hash it (same as before)\r",
                      "        // const inputToHash = btoa(finalPayload) + secret;\r",
                      "        // const inputToHash = finalPayload + secret;\r",
                      "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                      "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                      "     \r",
                      "        const encoder = new TextEncoder();\r",
                      "        const dataToHash = encoder.encode(inputToHash);\r",
                      "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                      "        const hash = bufToB64(hashBuffer);\r",
                      "\r",
                      "console.log('dataToHash => ', dataToHash)\r",
                      "console.log('hash => ', hash)\r",
                      "        // Set headers and body in Postman\r",
                      "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                      "        pm.variables.set('body', finalPayload);\r",
                      "\r",
                      "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                      "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                      "    } catch (err) {\r",
                      "        console.error('Encryption error:', err);\r",
                      "    }\r",
                      "};\r",
                      "\r",
                      "await finalEncrypt(data);\r",
                      ""
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.globals.set(\"token\", \" \");\r",
                      "\r",
                      "var jsonData = pm.response.json();\r",
                      "console.log('jsonData ->', jsonData);\r",
                      "\r",
                      "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                      "console.log('vData -> ', vData);\r",
                      "\r",
                      "let getToken = vData.access_token;\r",
                      "pm.globals.set(\"token\", getToken);\r",
                      "\r",
                      "// log fresh value directly (donâ€™t rely on globals here)\r",
                      "console.log(\"Auth Token (fresh):\", getToken);\r",
                      ""
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "request": {
                "method": "PUT",
                "header": [],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "body",
                      "value": "{{body}}",
                      "type": "text"
                    },
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/C:/tmp/jetstamp.png"
                    }
                  ]
                },
                "url": {
                  "raw": "{{BASE_URL}}/resident/editresident",
                  "host": [
                    "{{BASE_URL}}"
                  ],
                  "path": [
                    "resident",
                    "editresident"
                  ]
                },
                "description": "Login API"
              },
              "response": []
            }
          ]
        },
        {
          "name": "Resident Family Module",
          "item": [
            {
              "name": "Token & Guest",
              "item": [
                {
                  "name": "Get Guest Categories",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/getguestcategorylist",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "getguestcategorylist"
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                },
                {
                  "name": "Get Resident",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/getresident/RR1000000077",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "getresident",
                        "RR1000000077"
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                },
                {
                  "name": "Generate Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data = {\r",
                          "    \"residentid\": \"RR1000000079\",\r",
                          "    \"visitFirstname\": \"Test\",\r",
                          "    \"visitLastname\": \"Only\",\r",
                          "    \"email\": \"test@test.com\",\r",
                          "    \"phoneno\": \"08023357189\",\r",
                          "    \"arrivedate\": \"2025-11-25\",\r",
                          "    \"visitorNum\": 1,\r",
                          "    \"visitReason\": \"test\",\r",
                          "    \"visitorMainCategory\": \"Event\",  // 'Casual', 'Event'\r",
                          "    \"visitorRelationship\": \"PERSONAL_GUESTS\",   // {{BASE_URL}}/resident/getguestcategorylist\r",
                          "    \"eventTitle\": \"Test Event\",\r",
                          "    \"eventVisitors\":[   // empty if visitorMainCategory is CASUAL\r",
                          "        // {\r",
                          "        //     \"visitorName\": \"xyx abc\",\r",
                          "        //     \"gender\": \"Male\",\r",
                          "            // \"fone\": 08023357189,\r",
                          "        //     \"email\": \"xya@gmail.com\"\r",
                          "        // },\r",
                          "        {\r",
                          "            \"visitorName\": \"dfg abc\",\r",
                          "            \"gender\": \"Female\",\r",
                          "            \"fone\": 08023357189,\r",
                          "            \"email\": \"abc@gmail.com\"\r",
                          "        }\r",
                          "    ]\r",
                          "}\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "POST",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{{body}}\r\n",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/addresidenttoken",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "addresidenttoken"
                      ]
                    },
                    "description": "Token API\n\nPayload:  \n\nconst data = {  \n\"residentid\": \"RR1000000079\",  \n\"visitFirstname\": \"Test\",  \n\"visitLastname\": \"Only\",  \n\"email\": \"[test@test.com](https://mailto:test@test.com)\",  \n\"phoneno\": \"08023357189\",  \n\"arrivedate\": \"2025-11-25\",  \n\"visitorNum\": 1,  \n\"visitReason\": \"test\",  \n\"visitorMainCategory\": \"Event\", // 'Casual', 'Event'  \n\"visitorRelationship\": \"PERSONAL_GUESTS\", // {{BASE_URL}}/resident/getguestcategorylist  \n\"eventTitle\": \"Test Event\",  \n\"eventVisitors\":\\[ // empty if visitorMainCategory is CASUAL  \n{  \n\"visitorName\": \"dfg abc\",  \n\"gender\": \"Female\",  \n\"fone\": 08023357189,  \n\"email\": \"[abc@gmail.com](https://mailto:abc@gmail.com)\"  \n}  \n\\]  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Edit Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data = {\r",
                          "    \"id\": \"e221c169-eafc-4f47-a3cb-79a4e2e2e6b9\",\r",
                          "    \"residentid\": \"RR1000000079\",\r",
                          "    \"visitFirstname\": \"Test\",\r",
                          "    \"visitLastname\": \"Only\",\r",
                          "    \"email\": \"test@test.com\",\r",
                          "    \"phoneno\": \"08023357189\",\r",
                          "    \"arrivedate\": \"2025-11-25\",\r",
                          "    \"visitorNum\": 2,\r",
                          "    \"visitReason\": \"test\",\r",
                          "    \"visitorMainCategory\": \"Event\",  // 'Casual', 'Event'\r",
                          "    \"visitorRelationship\": \"PERSONAL_GUESTS\",   // {{BASE_URL}}/resident/getguestcategorylist\r",
                          "    \"eventTitle\": \"Test Event\",\r",
                          "    \"eventVisitors\":[   // empty if visitorMainCategory is CASUAL\r",
                          "        {\r",
                          "            \"visitorName\": \"xyx abc\",\r",
                          "            \"gender\": \"Male\",\r",
                          "            \"fone\": 08023357189,\r",
                          "            \"email\": \"xya@gmail.com\"\r",
                          "        },\r",
                          "        {\r",
                          "            \"visitorName\": \"dfg abc\",\r",
                          "            \"gender\": \"Female\",\r",
                          "            \"fone\": 08023357189,\r",
                          "            \"email\": \"abc@gmail.com\"\r",
                          "        }\r",
                          "    ]\r",
                          "}\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "PUT",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{{body}}\r\n",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/editresidenttoken",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "editresidenttoken"
                      ]
                    },
                    "description": "edit Token API\n\nPayload:  \nconst data = {  \n\"id\": \"e221c169-eafc-4f47-a3cb-79a4e2e2e6b9\",  \n\"residentid\": \"RR1000000079\",  \n\"visitFirstname\": \"Test\",  \n\"visitLastname\": \"Only\",  \n\"email\": \"[test@test.com](https://mailto:test@test.com)\",  \n\"phoneno\": \"08023357189\",  \n\"arrivedate\": \"2025-11-25\",  \n\"visitorNum\": 2,  \n\"visitReason\": \"test\",  \n\"visitorMainCategory\": \"Event\", // 'Casual', 'Event'  \n\"visitorRelationship\": \"PERSONAL_GUESTS\", // {{BASE_URL}}/resident/getguestcategorylist  \n\"eventTitle\": \"Test Event\",  \n\"eventVisitors\":\\[ // empty if visitorMainCategory is CASUAL  \n{  \n\"visitorName\": \"xyx abc\",  \n\"gender\": \"Male\",  \n\"fone\": 08023357189,  \n\"email\": \"[xya@gmail.com](https://mailto:xya@gmail.com)\"  \n},  \n{  \n\"visitorName\": \"dfg abc\",  \n\"gender\": \"Female\",  \n\"fone\": 08023357189,  \n\"email\": \"[abc@gmail.com](https://mailto:abc@gmail.com)\"  \n}  \n\\]  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Status Token Change",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const data = {\r",
                          "    \"id\": \"acfbeb23-b4c6-4e56-ae6a-88ce42c85bee\",\r",
                          "    \"residentid\": \"RR1000000079\",\r",
                          "    \"statuz\": \"Revoked\"     // 'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'\r",
                          "}\r",
                          "\r",
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Your RSA Public Key PEM here (replace with actual key)\r",
                          "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                          "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                          "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                          "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                          "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                          "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                          "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                          "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                          "      '0QIDAQAB\\n' +\r",
                          "      '-----END PUBLIC KEY-----\\n';\r",
                          "\r",
                          "// Helper: PEM to CryptoKey import\r",
                          "\r",
                          "async function importRsaPublicKey(pem) {\r",
                          "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                          "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                          "    let pemContents = pem.trim();\r",
                          "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                          "    const binaryDerString = atob(pemContents);\r",
                          "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                          "\r",
                          "    return crypto.subtle.importKey(\r",
                          "        \"spki\",\r",
                          "        binaryDer.buffer,\r",
                          "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                          "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                          "        false,\r",
                          "        [\"encrypt\"]\r",
                          "    );\r",
                          "}\r",
                          "\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "function b64EncodeUnicode(str) {\r",
                          "    return btoa(unescape(encodeURIComponent(str)));\r",
                          "}\r",
                          "\r",
                          "async function hybridEncrypt(publicKey, data) {\r",
                          "    const encoder = new TextEncoder();\r",
                          "\r",
                          "    // 1. Generate AES key\r",
                          "    const aesKey = await crypto.subtle.generateKey(\r",
                          "        { name: \"AES-GCM\", length: 256 },\r",
                          "        true,\r",
                          "        [\"encrypt\", \"decrypt\"]\r",
                          "    );\r",
                          "\r",
                          "    // 2. Encrypt data with AES-GCM\r",
                          "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                          "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                          "    const encryptedData = await crypto.subtle.encrypt(\r",
                          "        { name: \"AES-GCM\", iv },\r",
                          "        aesKey,\r",
                          "        encodedData\r",
                          "    );\r",
                          "\r",
                          "    // 3. Export AES key raw\r",
                          "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                          "\r",
                          "    // 4. Encrypt AES key with RSA-OAEP\r",
                          "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                          "        { name: \"RSA-OAEP\" },\r",
                          "        publicKey,\r",
                          "        rawAesKey\r",
                          "    );\r",
                          "\r",
                          "    return {\r",
                          "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                          "        iv: bufToB64(iv),\r",
                          "        encryptedData: bufToB64(encryptedData)\r",
                          "    };\r",
                          "}\r",
                          "\r",
                          "async function finalEncrypt(data) {\r",
                          "    console.log('data (finalEncrypt) => ', data)\r",
                          "    try {\r",
                          "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                          " console.log('publicKey => ', publicKey)\r",
                          "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                          "        console.log('encryptedPayload => ', encryptedPayload)\r",
                          "\r",
                          "        // Serialize final payload as JSON string\r",
                          "        const finalPayload = JSON.stringify({ \r",
                          "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                          "            iv: encryptedPayload.iv,\r",
                          "            encryptedData: encryptedPayload.encryptedData\r",
                          "        });\r",
                          "        console.log('finalPayload => ', finalPayload)\r",
                          "\r",
                          "        // Create hash input and hash it (same as before)\r",
                          "        // const inputToHash = btoa(finalPayload) + secret;\r",
                          "        // const inputToHash = finalPayload + secret;\r",
                          "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                          "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                          "     \r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(inputToHash);\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "console.log('dataToHash => ', dataToHash)\r",
                          "console.log('hash => ', hash)\r",
                          "        // Set headers and body in Postman\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "        pm.variables.set('body', finalPayload);\r",
                          "\r",
                          "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                          "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Encryption error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await finalEncrypt(data);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    },
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "pm.globals.set(\"token\", \" \");\r",
                          "\r",
                          "var jsonData = pm.response.json();\r",
                          "console.log('jsonData ->', jsonData);\r",
                          "\r",
                          "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                          "console.log('vData -> ', vData);\r",
                          "\r",
                          "let getToken = vData.access_token;\r",
                          "pm.globals.set(\"token\", getToken);\r",
                          "\r",
                          "// log fresh value directly (donâ€™t rely on globals here)\r",
                          "console.log(\"Auth Token (fresh):\", getToken);\r",
                          ""
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "request": {
                    "method": "PUT",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{{body}}\r\n",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/statustokenchange",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "statustokenchange"
                      ]
                    },
                    "description": "Token Status Change API\n\nPayload:  \nconst data = {  \n\"id\": \"acfbeb23-b4c6-4e56-ae6a-88ce42c85bee\",  \n\"residentid\": \"RR1000000079\",  \n\"statuz\": \"Revoked\" // 'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'  \n}"
                  },
                  "response": []
                },
                {
                  "name": "Get Token Usage",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/gettokenUsage/TT1000000067",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "gettokenUsage",
                        "TT1000000067"
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                },
                {
                  "name": "Get All Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/resident/getallresidenttoken",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "resident",
                        "getallresidenttoken"
                      ],
                      "query": [
                        {
                          "key": "addr",
                          "value": "abf",
                          "disabled": true
                        },
                        {
                          "key": "status",
                          "value": "Used",
                          "description": "'In-Use', 'Used', 'Un-Used', 'Revoked', 'Expired'\n",
                          "disabled": true
                        },
                        {
                          "key": "residentid",
                          "value": "RR0000120202",
                          "disabled": true
                        }
                      ]
                    },
                    "description": "Spools all token records"
                  },
                  "response": [
                    {
                      "name": "Get Movement",
                      "originalRequest": {
                        "method": "GET",
                        "header": [],
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getallresidentmovement",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getallresidentmovement"
                          ],
                          "query": [
                            {
                              "key": "addr",
                              "value": "abf",
                              "disabled": true
                            },
                            {
                              "key": "status",
                              "value": "Close",
                              "description": "Close or Open",
                              "disabled": true
                            }
                          ]
                        }
                      },
                      "status": "OK",
                      "code": 200,
                      "_postman_previewlanguage": "Text",
                      "header": [
                        {
                          "key": "Server",
                          "value": "nginx/1.14.1"
                        },
                        {
                          "key": "Date",
                          "value": "Tue, 28 Oct 2025 00:08:14 GMT"
                        },
                        {
                          "key": "Content-Type",
                          "value": "application/json; charset=utf-8"
                        },
                        {
                          "key": "Content-Length",
                          "value": "525"
                        },
                        {
                          "key": "Connection",
                          "value": "keep-alive"
                        },
                        {
                          "key": "X-Powered-By",
                          "value": "Express"
                        },
                        {
                          "key": "Access-Control-Allow-Origin",
                          "value": "*"
                        },
                        {
                          "key": "ETag",
                          "value": "W/\"20d-LkYChzAbDkl176MChzH6WkEbo70\""
                        },
                        {
                          "key": "Vary",
                          "value": "Accept-Encoding"
                        }
                      ],
                      "cookie": [],
                      "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": {\n        \"data\": [\n            {\n                \"id\": \"9e5bb854-4c0e-4aa1-955b-66f08e429dbf\",\n                \"coyid\": \"E001\",\n                \"residentid\": \"RR1000000079\",\n                \"addr\": \"1 abc rd\",\n                \"timein\": \"2025-10-27T20:51:02.000Z\",\n                \"timeout\": \"2025-10-27T22:32:34.000Z\",\n                \"mvstatus\": \"Close\",\n                \"assigneddays\": []\n            }\n        ],\n        \"summary\": {\n            \"total_movement\": 1,\n            \"opened_status\": 0,\n            \"closed_status\": 1\n        },\n        \"pagination\": {\n            \"total\": 1,\n            \"page\": 1,\n            \"pageSize\": 20,\n            \"totalPages\": 1\n        }\n    },\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                    }
                  ]
                },
                {
                  "name": "Get Token",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/estatemgt/getresidenttoken/RR1000000079",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "estatemgt",
                        "getresidenttoken",
                        "RR1000000079"
                      ]
                    },
                    "description": "Spools token records"
                  },
                  "response": [
                    {
                      "name": "Get Movement Copy",
                      "originalRequest": {
                        "method": "GET",
                        "header": [],
                        "url": {
                          "raw": "{{BASE_URL}}/estatemgt/getresidentmovement/RR1000000079",
                          "host": [
                            "{{BASE_URL}}"
                          ],
                          "path": [
                            "estatemgt",
                            "getresidentmovement",
                            "RR1000000079"
                          ]
                        }
                      },
                      "status": "OK",
                      "code": 200,
                      "_postman_previewlanguage": "Text",
                      "header": [
                        {
                          "key": "Server",
                          "value": "nginx/1.14.1"
                        },
                        {
                          "key": "Date",
                          "value": "Mon, 27 Oct 2025 23:59:04 GMT"
                        },
                        {
                          "key": "Content-Type",
                          "value": "application/json; charset=utf-8"
                        },
                        {
                          "key": "Content-Length",
                          "value": "368"
                        },
                        {
                          "key": "Connection",
                          "value": "keep-alive"
                        },
                        {
                          "key": "X-Powered-By",
                          "value": "Express"
                        },
                        {
                          "key": "Access-Control-Allow-Origin",
                          "value": "*"
                        },
                        {
                          "key": "ETag",
                          "value": "W/\"170-XRVuXIPF7+VCCMKsG9KxnPc2P/A\""
                        },
                        {
                          "key": "Vary",
                          "value": "Accept-Encoding"
                        }
                      ],
                      "cookie": [],
                      "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"Estate Settings records retrieved\",\n    \"data\": [\n        {\n            \"id\": \"9e5bb854-4c0e-4aa1-955b-66f08e429dbf\",\n            \"coyid\": \"E001\",\n            \"residentid\": \"RR1000000079\",\n            \"addr\": \"1 abc rd\",\n            \"timein\": \"2025-10-27T20:51:02.000Z\",\n            \"timeout\": \"2025-10-27T22:32:34.000Z\",\n            \"mvstatus\": \"Close\"\n        }\n    ],\n    \"description\": {\n        \"status\": 200,\n        \"description\": \"successful\",\n        \"code\": \"ROMA-2000\",\n        \"range\": \"2000 - 2019\"\n    }\n}"
                    }
                  ]
                }
              ]
            },
            {
              "name": "Estate Vendors",
              "item": [
                {
                  "name": "Get All Vendor",
                  "event": [
                    {
                      "listen": "prerequest",
                      "script": {
                        "exec": [
                          "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                          "\r",
                          "// Helpers\r",
                          "function bufToB64(buf) {\r",
                          "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                          "}\r",
                          "\r",
                          "async function secretOnly() {\r",
                          "    try {\r",
                          "        // 1. Encode secret directly\r",
                          "        const encoder = new TextEncoder();\r",
                          "        const dataToHash = encoder.encode(secret);\r",
                          "\r",
                          "        // 2. Hash it with SHA-256\r",
                          "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                          "        const hash = bufToB64(hashBuffer);\r",
                          "\r",
                          "        // 3. Add header\r",
                          "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                          "\r",
                          "        console.log('ðŸ” Secret-only hash:', hash);\r",
                          "    } catch (err) {\r",
                          "        console.error('Hashing error:', err);\r",
                          "    }\r",
                          "};\r",
                          "\r",
                          "await secretOnly();"
                        ],
                        "type": "text/javascript",
                        "packages": {},
                        "requests": {}
                      }
                    }
                  ],
                  "protocolProfileBehavior": {
                    "disableBodyPruning": true
                  },
                  "request": {
                    "method": "GET",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{BASE_URL}}/estateops/getallestatevendors",
                      "host": [
                        "{{BASE_URL}}"
                      ],
                      "path": [
                        "estateops",
                        "getallestatevendors"
                      ],
                      "query": [
                        {
                          "key": "addr",
                          "value": null,
                          "disabled": true
                        },
                        {
                          "key": "vname",
                          "value": "femi",
                          "disabled": true
                        },
                        {
                          "key": "shopname",
                          "value": null,
                          "disabled": true
                        },
                        {
                          "key": "fone",
                          "value": null,
                          "disabled": true
                        },
                        {
                          "key": "startdate",
                          "value": null,
                          "description": "YYYY-MM-DD",
                          "disabled": true
                        },
                        {
                          "key": "enddate",
                          "value": null,
                          "description": "YYYY-MM-DD",
                          "disabled": true
                        }
                      ]
                    },
                    "description": "Spools all group records"
                  },
                  "response": []
                }
              ]
            }
          ]
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                  "\r",
                  "const data = {\r",
                  "    \"email\": \"mobile@gmail.com\",\r",
                  "    \"password\" : \"Password1.\"\r",
                  "}\r",
                  "\r",
                  "// Your RSA Public Key PEM here (replace with actual key)\r",
                  "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                  "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                  "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                  "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                  "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                  "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                  "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                  "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                  "      '0QIDAQAB\\n' +\r",
                  "      '-----END PUBLIC KEY-----\\n';\r",
                  "\r",
                  "// Helper: PEM to CryptoKey import\r",
                  "\r",
                  "async function importRsaPublicKey(pem) {\r",
                  "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                  "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                  "    let pemContents = pem.trim();\r",
                  "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                  "    const binaryDerString = atob(pemContents);\r",
                  "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                  "\r",
                  "    return crypto.subtle.importKey(\r",
                  "        \"spki\",\r",
                  "        binaryDer.buffer,\r",
                  "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                  "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                  "        false,\r",
                  "        [\"encrypt\"]\r",
                  "    );\r",
                  "}\r",
                  "\r",
                  "function bufToB64(buf) {\r",
                  "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                  "}\r",
                  "\r",
                  "function b64EncodeUnicode(str) {\r",
                  "    return btoa(unescape(encodeURIComponent(str)));\r",
                  "}\r",
                  "\r",
                  "async function hybridEncrypt(publicKey, data) {\r",
                  "    const encoder = new TextEncoder();\r",
                  "\r",
                  "    // 1. Generate AES key\r",
                  "    const aesKey = await crypto.subtle.generateKey(\r",
                  "        { name: \"AES-GCM\", length: 256 },\r",
                  "        true,\r",
                  "        [\"encrypt\", \"decrypt\"]\r",
                  "    );\r",
                  "\r",
                  "    // 2. Encrypt data with AES-GCM\r",
                  "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                  "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                  "    const encryptedData = await crypto.subtle.encrypt(\r",
                  "        { name: \"AES-GCM\", iv },\r",
                  "        aesKey,\r",
                  "        encodedData\r",
                  "    );\r",
                  "\r",
                  "    // 3. Export AES key raw\r",
                  "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                  "\r",
                  "    // 4. Encrypt AES key with RSA-OAEP\r",
                  "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                  "        { name: \"RSA-OAEP\" },\r",
                  "        publicKey,\r",
                  "        rawAesKey\r",
                  "    );\r",
                  "\r",
                  "    return {\r",
                  "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                  "        iv: bufToB64(iv),\r",
                  "        encryptedData: bufToB64(encryptedData)\r",
                  "    };\r",
                  "}\r",
                  "\r",
                  "async function finalEncrypt(data) {\r",
                  "    console.log('data (finalEncrypt) => ', data)\r",
                  "    try {\r",
                  "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                  " console.log('publicKey => ', publicKey)\r",
                  "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                  "        console.log('encryptedPayload => ', encryptedPayload)\r",
                  "\r",
                  "        // Serialize final payload as JSON string\r",
                  "        const finalPayload = JSON.stringify({ \r",
                  "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                  "            iv: encryptedPayload.iv,\r",
                  "            encryptedData: encryptedPayload.encryptedData\r",
                  "        });\r",
                  "        console.log('finalPayload => ', finalPayload)\r",
                  "\r",
                  "        // Create hash input and hash it (same as before)\r",
                  "        // const inputToHash = btoa(finalPayload) + secret;\r",
                  "        // const inputToHash = finalPayload + secret;\r",
                  "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                  "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                  "     \r",
                  "        const encoder = new TextEncoder();\r",
                  "        const dataToHash = encoder.encode(inputToHash);\r",
                  "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                  "        const hash = bufToB64(hashBuffer);\r",
                  "\r",
                  "console.log('dataToHash => ', dataToHash)\r",
                  "console.log('hash => ', hash)\r",
                  "        // Set headers and body in Postman\r",
                  "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                  "        pm.variables.set('body', finalPayload);\r",
                  "\r",
                  "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                  "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                  "    } catch (err) {\r",
                  "        console.error('Encryption error:', err);\r",
                  "    }\r",
                  "};\r",
                  "\r",
                  "await finalEncrypt(data);\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.globals.set(\"token\", \" \");\r",
                  "\r",
                  "var jsonData = pm.response.json();\r",
                  "console.log('jsonData ->', jsonData);\r",
                  "\r",
                  "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                  "console.log('vData -> ', vData);\r",
                  "\r",
                  "let getToken = vData.access_token;\r",
                  "pm.globals.set(\"token\", getToken);\r",
                  "\r",
                  "// log fresh value directly (donâ€™t rely on globals here)\r",
                  "console.log(\"Auth Token (fresh):\", getToken);\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{{body}}\r\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{BASE_URL}}/auth/login",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "description": "Login API"
          },
          "response": []
        },
        {
          "name": "LogOut User",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const password = 'iTisAstroGPass1.';\r",
                  "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                  "\r",
                  "// const data = { message: 'hello world' };\r",
                  "const data = {\r",
                  "    \"loginuser\" : \"mobile@gmail.com\"\r",
                  "}\r",
                  "\r",
                  "// Your RSA Public Key PEM here (replace with actual key)\r",
                  "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                  "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                  "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                  "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                  "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                  "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                  "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                  "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                  "      '0QIDAQAB\\n' +\r",
                  "      '-----END PUBLIC KEY-----\\n';\r",
                  "\r",
                  "// Helper: PEM to CryptoKey import\r",
                  "\r",
                  "async function importRsaPublicKey(pem) {\r",
                  "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                  "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                  "    let pemContents = pem.trim();\r",
                  "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                  "    const binaryDerString = atob(pemContents);\r",
                  "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                  "\r",
                  "    return crypto.subtle.importKey(\r",
                  "        \"spki\",\r",
                  "        binaryDer.buffer,\r",
                  "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                  "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                  "        false,\r",
                  "        [\"encrypt\"]\r",
                  "    );\r",
                  "}\r",
                  "\r",
                  "function bufToB64(buf) {\r",
                  "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                  "}\r",
                  "\r",
                  "function b64EncodeUnicode(str) {\r",
                  "    return btoa(unescape(encodeURIComponent(str)));\r",
                  "}\r",
                  "\r",
                  "async function hybridEncrypt(publicKey, data) {\r",
                  "    const encoder = new TextEncoder();\r",
                  "\r",
                  "    // 1. Generate AES key\r",
                  "    const aesKey = await crypto.subtle.generateKey(\r",
                  "        { name: \"AES-GCM\", length: 256 },\r",
                  "        true,\r",
                  "        [\"encrypt\", \"decrypt\"]\r",
                  "    );\r",
                  "\r",
                  "    // 2. Encrypt data with AES-GCM\r",
                  "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                  "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                  "    const encryptedData = await crypto.subtle.encrypt(\r",
                  "        { name: \"AES-GCM\", iv },\r",
                  "        aesKey,\r",
                  "        encodedData\r",
                  "    );\r",
                  "\r",
                  "    // 3. Export AES key raw\r",
                  "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                  "\r",
                  "    // 4. Encrypt AES key with RSA-OAEP\r",
                  "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                  "        { name: \"RSA-OAEP\" },\r",
                  "        publicKey,\r",
                  "        rawAesKey\r",
                  "    );\r",
                  "\r",
                  "    return {\r",
                  "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                  "        iv: bufToB64(iv),\r",
                  "        encryptedData: bufToB64(encryptedData)\r",
                  "    };\r",
                  "}\r",
                  "\r",
                  "async function finalEncrypt(data) {\r",
                  "    console.log('data (finalEncrypt) => ', data)\r",
                  "    try {\r",
                  "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                  " console.log('publicKey => ', publicKey)\r",
                  "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                  "        console.log('encryptedPayload => ', encryptedPayload)\r",
                  "\r",
                  "        // Serialize final payload as JSON string\r",
                  "        const finalPayload = JSON.stringify({ \r",
                  "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                  "            iv: encryptedPayload.iv,\r",
                  "            encryptedData: encryptedPayload.encryptedData\r",
                  "        });\r",
                  "        console.log('finalPayload => ', finalPayload)\r",
                  "\r",
                  "        // Create hash input and hash it (same as before)\r",
                  "        // const inputToHash = btoa(finalPayload) + secret;\r",
                  "        // const inputToHash = finalPayload + secret;\r",
                  "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                  "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                  "     \r",
                  "        const encoder = new TextEncoder();\r",
                  "        const dataToHash = encoder.encode(inputToHash);\r",
                  "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                  "        const hash = bufToB64(hashBuffer);\r",
                  "\r",
                  "console.log('dataToHash => ', dataToHash)\r",
                  "console.log('hash => ', hash)\r",
                  "        // Set headers and body in Postman\r",
                  "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                  "        pm.variables.set('body', finalPayload);\r",
                  "\r",
                  "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                  "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                  "    } catch (err) {\r",
                  "        console.error('Encryption error:', err);\r",
                  "    }\r",
                  "};\r",
                  "\r",
                  "await finalEncrypt(data);\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{{body}}\r\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{BASE_URL}}/logout",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "logout"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Change Password",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
                  "\r",
                  "const data = {\r",
                  "    \"id\" : \"6e87ae4f-80d8-4534-b99c-0ebdd31188d1\",\r",
                  "    \"password\" : \"Password1.\",\r",
                  "    \"newPassword\" : \"Password3.\"\r",
                  "}\r",
                  "\r",
                  "// Your RSA Public Key PEM here (replace with actual key)\r",
                  "// ALWAYS COPY PRIVATE KEY FROM NODEJS APP - C:\\norlics\\femi\\enc_v2\\app.js\r",
                  "const publicKeyPem = '-----BEGIN PUBLIC KEY-----\\n' +\r",
                  "      'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1TvEyfubW8DEtQzecTVr\\n' +\r",
                  "      'sOStkjha+uK2NgULeo4azM2W4tYZt7nPVYw5YfHIq3FQAxD6iq+w6Pde/620z+zU\\n' +\r",
                  "      '97IHCG40biDIMsyYiK21YIbSOZgzDRL/A870wzIHeTaIVwx7A3nEfrQzm521io4J\\n' +\r",
                  "      '/n6Fr6cYg2nm3V4MjJ8vjRb5zOBpl8izsShYxL+BtlM9VRkwx6bf4B7Eeoz4vQPm\\n' +\r",
                  "      'x5Cu4DugXntEVClju/72M/rHFWc3S0hi16DIhW2F+k6H67qScj2JGQ0D3se+tGHv\\n' +\r",
                  "      'bos+j7+cm8Eyn9Cq+N++TfFWIlw11y25V75Is85nASVDTMEuuPIjoL6Zo+OTkSbe\\n' +\r",
                  "      '0QIDAQAB\\n' +\r",
                  "      '-----END PUBLIC KEY-----\\n';\r",
                  "\r",
                  "// Helper: PEM to CryptoKey import\r",
                  "\r",
                  "async function importRsaPublicKey(pem) {\r",
                  "    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\r",
                  "    const pemFooter = \"-----END PUBLIC KEY-----\";\r",
                  "    let pemContents = pem.trim();\r",
                  "    pemContents = pemContents.replace(pemHeader, \"\").replace(pemFooter, \"\").replace(/\\s/g, \"\");\r",
                  "    const binaryDerString = atob(pemContents);\r",
                  "    const binaryDer = new Uint8Array([...binaryDerString].map(c => c.charCodeAt(0)));\r",
                  "\r",
                  "    return crypto.subtle.importKey(\r",
                  "        \"spki\",\r",
                  "        binaryDer.buffer,\r",
                  "        // { name: \"RSA-OAEP\", hash: \"SHA-256\" },\r",
                  "        { name: \"RSA-OAEP\", hash: \"SHA-1\" },\r",
                  "        false,\r",
                  "        [\"encrypt\"]\r",
                  "    );\r",
                  "}\r",
                  "\r",
                  "function bufToB64(buf) {\r",
                  "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                  "}\r",
                  "\r",
                  "function b64EncodeUnicode(str) {\r",
                  "    return btoa(unescape(encodeURIComponent(str)));\r",
                  "}\r",
                  "\r",
                  "async function hybridEncrypt(publicKey, data) {\r",
                  "    const encoder = new TextEncoder();\r",
                  "\r",
                  "    // 1. Generate AES key\r",
                  "    const aesKey = await crypto.subtle.generateKey(\r",
                  "        { name: \"AES-GCM\", length: 256 },\r",
                  "        true,\r",
                  "        [\"encrypt\", \"decrypt\"]\r",
                  "    );\r",
                  "\r",
                  "    // 2. Encrypt data with AES-GCM\r",
                  "    const iv = crypto.getRandomValues(new Uint8Array(12));\r",
                  "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                  "    const encryptedData = await crypto.subtle.encrypt(\r",
                  "        { name: \"AES-GCM\", iv },\r",
                  "        aesKey,\r",
                  "        encodedData\r",
                  "    );\r",
                  "\r",
                  "    // 3. Export AES key raw\r",
                  "    const rawAesKey = await crypto.subtle.exportKey(\"raw\", aesKey);\r",
                  "\r",
                  "    // 4. Encrypt AES key with RSA-OAEP\r",
                  "    const encryptedAesKey = await crypto.subtle.encrypt(\r",
                  "        { name: \"RSA-OAEP\" },\r",
                  "        publicKey,\r",
                  "        rawAesKey\r",
                  "    );\r",
                  "\r",
                  "    return {\r",
                  "        encryptedAesKey: bufToB64(encryptedAesKey),\r",
                  "        iv: bufToB64(iv),\r",
                  "        encryptedData: bufToB64(encryptedData)\r",
                  "    };\r",
                  "}\r",
                  "\r",
                  "async function finalEncrypt(data) {\r",
                  "    console.log('data (finalEncrypt) => ', data)\r",
                  "    try {\r",
                  "        const publicKey = await importRsaPublicKey(publicKeyPem);\r",
                  " console.log('publicKey => ', publicKey)\r",
                  "       const encryptedPayload = await hybridEncrypt(publicKey, data);\r",
                  "        console.log('encryptedPayload => ', encryptedPayload)\r",
                  "\r",
                  "        // Serialize final payload as JSON string\r",
                  "        const finalPayload = JSON.stringify({ \r",
                  "            encryptedAesKey: encryptedPayload.encryptedAesKey,\r",
                  "            iv: encryptedPayload.iv,\r",
                  "            encryptedData: encryptedPayload.encryptedData\r",
                  "        });\r",
                  "        console.log('finalPayload => ', finalPayload)\r",
                  "\r",
                  "        // Create hash input and hash it (same as before)\r",
                  "        // const inputToHash = btoa(finalPayload) + secret;\r",
                  "        // const inputToHash = finalPayload + secret;\r",
                  "        const inputToHash = b64EncodeUnicode(finalPayload) + secret\r",
                  "console.log(\"inputToHash (safe base64):\", inputToHash);\r",
                  "     \r",
                  "        const encoder = new TextEncoder();\r",
                  "        const dataToHash = encoder.encode(inputToHash);\r",
                  "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
                  "        const hash = bufToB64(hashBuffer);\r",
                  "\r",
                  "console.log('dataToHash => ', dataToHash)\r",
                  "console.log('hash => ', hash)\r",
                  "        // Set headers and body in Postman\r",
                  "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
                  "        pm.variables.set('body', finalPayload);\r",
                  "\r",
                  "        console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                  "        console.log('ðŸ” X-Payload-Hash:', hash);\r",
                  "    } catch (err) {\r",
                  "        console.error('Encryption error:', err);\r",
                  "    }\r",
                  "};\r",
                  "\r",
                  "await finalEncrypt(data);\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {}
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.globals.set(\"token\", \" \");\r",
                  "\r",
                  "var jsonData = pm.response.json();\r",
                  "console.log('jsonData ->', jsonData);\r",
                  "\r",
                  "let vData = jsonData.data;  // no need for JSON.parse(responseBody) here\r",
                  "console.log('vData -> ', vData);\r",
                  "\r",
                  "let getToken = vData.access_token;\r",
                  "pm.globals.set(\"token\", getToken);\r",
                  "\r",
                  "// log fresh value directly (donâ€™t rely on globals here)\r",
                  "console.log(\"Auth Token (fresh):\", getToken);\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{{body}}\r\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{BASE_URL}}/auth/change-password",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "auth",
                "change-password"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const password = 'myStrongPassword';\r",
                  "const secret = 'mySharedSecret';\r",
                  "// const data = { message: 'hello world' };\r",
                  "const data = {\r",
                  "    \"email\" : \"test2@test.com\",\r",
                  "    \"password\" : \"1234567\",\r",
                  "    \"firstname\" : \"Emmanuel\",\r",
                  "    \"lastname\" : \"Test\",\r",
                  "    \"phonenumber\" : \"08163549875\",\r",
                  "    \"accounttype\": \"corporate\"\r",
                  "}\r",
                  "\r",
                  "function generateSalt(len = 16) {\r",
                  "    return crypto.getRandomValues(new Uint8Array(len));\r",
                  "}\r",
                  "\r",
                  "function generateIV(len = 12) {\r",
                  "    return crypto.getRandomValues(new Uint8Array(len));\r",
                  "}\r",
                  "\r",
                  "function bufToB64(buf) {\r",
                  "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
                  "}\r",
                  "\r",
                  "function deriveKey(password, salt) {\r",
                  "    const encoder = new TextEncoder();\r",
                  "    return crypto.subtle.importKey(\r",
                  "        \"raw\", encoder.encode(password),\r",
                  "        { name: \"PBKDF2\" },\r",
                  "        false,\r",
                  "        [\"deriveKey\"]\r",
                  "    ).then(keyMaterial => {\r",
                  "        return crypto.subtle.deriveKey({\r",
                  "            name: \"PBKDF2\",\r",
                  "            salt: salt,\r",
                  "            iterations: 100000,\r",
                  "            hash: \"SHA-256\"\r",
                  "        }, keyMaterial, {\r",
                  "            name: \"AES-GCM\",\r",
                  "            length: 256\r",
                  "        }, true, [\"encrypt\"]);\r",
                  "    });\r",
                  "}\r",
                  "\r",
                  "async function hashSHA256(message) {\r",
                  "    const encoder = new TextEncoder();\r",
                  "    const data = encoder.encode(message);\r",
                  "    const hashBuffer = await crypto.subtle.digest(\"SHA-256\", data);\r",
                  "    return bufToB64(hashBuffer);\r",
                  "}\r",
                  "\r",
                  "async function encrypt(data, password) {\r",
                  "    const salt = generateSalt();\r",
                  "    const iv = generateIV();\r",
                  "    const encoder = new TextEncoder();\r",
                  "    const encodedData = encoder.encode(JSON.stringify(data));\r",
                  "\r",
                  "    return deriveKey(password, salt).then(key => {\r",
                  "        return crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, encodedData)\r",
                  "            .then(async encrypted => {\r",
                  "                const result = {\r",
                  "                    salt: bufToB64(salt),\r",
                  "                    iv: bufToB64(iv),\r",
                  "                    ciphertext: bufToB64(encrypted)\r",
                  "                };\r",
                  "\r",
                  "                // console.log('result => ', result)\r",
                  "                const encryptedPayload = btoa(JSON.stringify(result));\r",
                  "                // console.log('encryptedPayload => ', encryptedPayload)\r",
                  "\r",
                  "                // âœ… Correctly create input to hash\r",
                  "                const inputToHash = encryptedPayload + secret;\r",
                  "                // const inputToHash = encryptedPayload ;\r",
                  "                // console.log('ðŸ“¥ Input to hash (client):', inputToHash); // âœ… This is what backend hashes\r",
                  "\r",
                  "                const hash = await hashSHA256(inputToHash);\r",
                  "\r",
                  "                pm.request.headers.upsert({\r",
                  "                    key: 'X-Payload-Hash',\r",
                  "                    value: hash\r",
                  "                });\r",
                  "\r",
                  "                const finalPayload = JSON.stringify({ encrypted: encryptedPayload });\r",
                  "                pm.variables.set('body', finalPayload);\r",
                  "\r",
                  "                console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
                  "                console.log('ðŸ” X-Payload-Hash:', hash);\r",
                  "\r",
                  "                return finalPayload;\r",
                  "            });\r",
                  "    });\r",
                  "}\r",
                  "\r",
                  "await encrypt(data, password);\r",
                  ""
                ],
                "type": "text/javascript",
                "packages": {}
              }
            }
          ],
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{{body}}\r\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{BASE_URL}}/token/refresh",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "token",
                "refresh"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Activitylog",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "const secret = 'NoBeTheKeybeDizNah@3_18';\r",
              "\r",
              "// Helpers\r",
              "function bufToB64(buf) {\r",
              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
              "}\r",
              "\r",
              "async function secretOnly() {\r",
              "    try {\r",
              "        // 1. Encode secret directly\r",
              "        const encoder = new TextEncoder();\r",
              "        const dataToHash = encoder.encode(secret);\r",
              "\r",
              "        // 2. Hash it with SHA-256\r",
              "        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", dataToHash);\r",
              "        const hash = bufToB64(hashBuffer);\r",
              "\r",
              "        // 3. Add header\r",
              "        pm.request.headers.upsert({ key: 'X-Payload-Hash', value: hash });\r",
              "\r",
              "        console.log('ðŸ” Secret-only hash:', hash);\r",
              "    } catch (err) {\r",
              "        console.error('Hashing error:', err);\r",
              "    }\r",
              "};\r",
              "\r",
              "await secretOnly();"
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{BASE_URL}}/activitylog?search=role&page=1&pageSize=20",
          "host": [
            "{{BASE_URL}}"
          ],
          "path": [
            "activitylog"
          ],
          "query": [
            {
              "key": "search",
              "value": "role"
            },
            {
              "key": "page",
              "value": "1"
            },
            {
              "key": "pageSize",
              "value": "20"
            }
          ]
        },
        "description": "Spools all group records"
      },
      "response": [
        {
          "name": "Activitylog",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{BASE_URL}}/activitylog",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "activitylog"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "Text",
          "header": [
            {
              "key": "Server",
              "value": "nginx/1.14.1"
            },
            {
              "key": "Date",
              "value": "Thu, 18 Sep 2025 12:35:16 GMT"
            },
            {
              "key": "Content-Type",
              "value": "application/json; charset=utf-8"
            },
            {
              "key": "Transfer-Encoding",
              "value": "chunked"
            },
            {
              "key": "Connection",
              "value": "keep-alive"
            },
            {
              "key": "X-Powered-By",
              "value": "Express"
            },
            {
              "key": "Access-Control-Allow-Origin",
              "value": "*"
            },
            {
              "key": "ETag",
              "value": "W/\"3990-QWbOnN7Nsk4+inbQLeevULBViuc\""
            },
            {
              "key": "Vary",
              "value": "Accept-Encoding"
            },
            {
              "key": "Content-Encoding",
              "value": "br"
            }
          ],
          "cookie": [],
          "body": "{\n    \"respCode\": \"00\",\n    \"message\": \"All Retrieved Groups\",\n    \"data\": [\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Deactivated Shift with ID - SH20251000000041OT \",\n            \"createdat\": \"2025-09-18T12:18:09.000Z\",\n            \"updatedat\": \"2025-09-18T12:18:09.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Edited Shift with ID - SH20251000000042OT \",\n            \"createdat\": \"2025-09-18T12:13:59.000Z\",\n            \"updatedat\": \"2025-09-18T12:13:59.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Added Shift with ID - SH20251000000042OT \",\n            \"createdat\": \"2025-09-18T11:32:21.000Z\",\n            \"updatedat\": \"2025-09-18T11:32:21.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Activated Security with ID - RO202510000000422T \",\n            \"createdat\": \"2025-09-18T10:59:46.000Z\",\n            \"updatedat\": \"2025-09-18T10:59:46.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Activated Security with ID - RO202510000000422T \",\n            \"createdat\": \"2025-09-18T10:49:49.000Z\",\n            \"updatedat\": \"2025-09-18T10:49:49.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Activated Security with ID - RO202510000000422T \",\n            \"createdat\": \"2025-09-18T10:47:52.000Z\",\n            \"updatedat\": \"2025-09-18T10:47:52.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Deactivated Security with ID - RO202510000000422T \",\n            \"createdat\": \"2025-09-18T10:47:26.000Z\",\n            \"updatedat\": \"2025-09-18T10:47:26.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Edited Security with ID - RO20251000000038OT \",\n            \"createdat\": \"2025-09-18T10:38:53.000Z\",\n            \"updatedat\": \"2025-09-18T10:38:53.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Created Security with ID - RO20251000000045OT \",\n            \"createdat\": \"2025-09-18T09:58:27.000Z\",\n            \"updatedat\": \"2025-09-18T09:58:27.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Created Resident Self-Service role in Resident usergroup\",\n            \"createdat\": \"2025-09-18T09:28:22.000Z\",\n            \"updatedat\": \"2025-09-18T09:28:22.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Created undefined role in Resident usergroup\",\n            \"createdat\": \"2025-09-18T09:25:48.000Z\",\n            \"updatedat\": \"2025-09-18T09:25:48.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Created undefined role in Resident usergroup\",\n            \"createdat\": \"2025-09-18T08:27:21.000Z\",\n            \"updatedat\": \"2025-09-18T08:27:21.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Activated Sub-Admin, Admin\",\n            \"createdat\": \"2025-09-18T02:41:11.000Z\",\n            \"updatedat\": \"2025-09-18T02:41:11.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Deeactivated Sub-Admin, Admin\",\n            \"createdat\": \"2025-09-18T02:40:12.000Z\",\n            \"updatedat\": \"2025-09-18T02:40:12.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Edited Sub-Admin, Admin\",\n            \"createdat\": \"2025-09-18T02:32:06.000Z\",\n            \"updatedat\": \"2025-09-18T02:32:06.000Z\"\n        },\n        {\n            \"fullname\": \"Femi  Test\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"Femi  Test Created Sub-Admin - Resident\",\n            \"createdat\": \"2025-09-18T02:26:14.000Z\",\n            \"updatedat\": \"2025-09-18T02:26:14.000Z\"\n        },\n        {\n            \"fullname\": \"\",\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": \"\",\n            \"createdat\": \"2025-09-18T02:15:16.000Z\",\n            \"updatedat\": \"2025-09-18T02:15:16.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-18T02:04:42.000Z\",\n            \"updatedat\": \"2025-09-18T02:04:42.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-18T01:56:07.000Z\",\n            \"updatedat\": \"2025-09-18T01:56:07.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-18T01:49:53.000Z\",\n            \"updatedat\": \"2025-09-18T01:49:53.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-18T01:46:54.000Z\",\n            \"updatedat\": \"2025-09-18T01:46:54.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T18:16:20.000Z\",\n            \"updatedat\": \"2025-09-17T18:16:20.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T18:13:22.000Z\",\n            \"updatedat\": \"2025-09-17T18:13:22.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T18:12:57.000Z\",\n            \"updatedat\": \"2025-09-17T18:12:57.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T18:08:32.000Z\",\n            \"updatedat\": \"2025-09-17T18:08:32.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T18:07:54.000Z\",\n            \"updatedat\": \"2025-09-17T18:07:54.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T18:04:35.000Z\",\n            \"updatedat\": \"2025-09-17T18:04:35.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T18:02:41.000Z\",\n            \"updatedat\": \"2025-09-17T18:02:41.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T18:02:08.000Z\",\n            \"updatedat\": \"2025-09-17T18:02:08.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T18:01:00.000Z\",\n            \"updatedat\": \"2025-09-17T18:01:00.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T17:58:14.000Z\",\n            \"updatedat\": \"2025-09-17T17:58:14.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T17:56:35.000Z\",\n            \"updatedat\": \"2025-09-17T17:56:35.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T17:55:39.000Z\",\n            \"updatedat\": \"2025-09-17T17:55:39.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T17:37:10.000Z\",\n            \"updatedat\": \"2025-09-17T17:37:10.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T13:07:17.000Z\",\n            \"updatedat\": \"2025-09-17T13:07:17.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T13:01:19.000Z\",\n            \"updatedat\": \"2025-09-17T13:01:19.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-17T13:01:10.000Z\",\n            \"updatedat\": \"2025-09-17T13:01:10.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T20:09:30.000Z\",\n            \"updatedat\": \"2025-09-16T20:09:30.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T20:07:12.000Z\",\n            \"updatedat\": \"2025-09-16T20:07:12.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T20:05:25.000Z\",\n            \"updatedat\": \"2025-09-16T20:05:25.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T19:49:01.000Z\",\n            \"updatedat\": \"2025-09-16T19:49:01.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T19:38:40.000Z\",\n            \"updatedat\": \"2025-09-16T19:38:40.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T18:56:40.000Z\",\n            \"updatedat\": \"2025-09-16T18:56:40.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T14:01:32.000Z\",\n            \"updatedat\": \"2025-09-16T14:01:32.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T14:00:48.000Z\",\n            \"updatedat\": \"2025-09-16T14:00:48.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T13:21:54.000Z\",\n            \"updatedat\": \"2025-09-16T13:21:54.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T13:16:19.000Z\",\n            \"updatedat\": \"2025-09-16T13:16:19.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T12:33:46.000Z\",\n            \"updatedat\": \"2025-09-16T12:33:46.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T09:56:15.000Z\",\n            \"updatedat\": \"2025-09-16T09:56:15.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T09:36:20.000Z\",\n            \"updatedat\": \"2025-09-16T09:36:20.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T07:22:09.000Z\",\n            \"updatedat\": \"2025-09-16T07:22:09.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T07:20:26.000Z\",\n            \"updatedat\": \"2025-09-16T07:20:26.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T07:12:53.000Z\",\n            \"updatedat\": \"2025-09-16T07:12:53.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T07:12:04.000Z\",\n            \"updatedat\": \"2025-09-16T07:12:04.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T07:10:16.000Z\",\n            \"updatedat\": \"2025-09-16T07:10:16.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T07:03:53.000Z\",\n            \"updatedat\": \"2025-09-16T07:03:53.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T07:01:45.000Z\",\n            \"updatedat\": \"2025-09-16T07:01:45.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T06:55:13.000Z\",\n            \"updatedat\": \"2025-09-16T06:55:13.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T06:48:47.000Z\",\n            \"updatedat\": \"2025-09-16T06:48:47.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T06:44:42.000Z\",\n            \"updatedat\": \"2025-09-16T06:44:42.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T06:40:29.000Z\",\n            \"updatedat\": \"2025-09-16T06:40:29.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-16T06:38:09.000Z\",\n            \"updatedat\": \"2025-09-16T06:38:09.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-15T22:29:39.000Z\",\n            \"updatedat\": \"2025-09-15T22:29:39.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-15T22:24:32.000Z\",\n            \"updatedat\": \"2025-09-15T22:24:32.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-15T22:18:37.000Z\",\n            \"updatedat\": \"2025-09-15T22:18:37.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-15T22:17:12.000Z\",\n            \"updatedat\": \"2025-09-15T22:17:12.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-15T22:11:35.000Z\",\n            \"updatedat\": \"2025-09-15T22:11:35.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-14T16:17:21.000Z\",\n            \"updatedat\": \"2025-09-14T16:17:21.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-14T16:16:37.000Z\",\n            \"updatedat\": \"2025-09-14T16:16:37.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-14T16:13:05.000Z\",\n            \"updatedat\": \"2025-09-14T16:13:05.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-14T16:11:24.000Z\",\n            \"updatedat\": \"2025-09-14T16:11:24.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-14T16:02:45.000Z\",\n            \"updatedat\": \"2025-09-14T16:02:45.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-13T14:45:43.000Z\",\n            \"updatedat\": \"2025-09-13T14:45:43.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-12T17:25:47.000Z\",\n            \"updatedat\": \"2025-09-12T17:25:47.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-12T02:14:13.000Z\",\n            \"updatedat\": \"2025-09-12T02:14:13.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-12T01:48:25.000Z\",\n            \"updatedat\": \"2025-09-12T01:48:25.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-12T01:43:37.000Z\",\n            \"updatedat\": \"2025-09-12T01:43:37.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-12T01:38:42.000Z\",\n            \"updatedat\": \"2025-09-12T01:38:42.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": null,\n            \"activity\": null,\n            \"createdat\": \"2025-09-11T23:35:09.000Z\",\n            \"updatedat\": \"2025-09-11T23:35:09.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-11T19:12:46.000Z\",\n            \"updatedat\": \"2025-09-11T19:12:46.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-11T19:03:50.000Z\",\n            \"updatedat\": \"2025-09-11T19:03:50.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-11T18:53:19.000Z\",\n            \"updatedat\": \"2025-09-11T18:53:19.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-11T18:43:25.000Z\",\n            \"updatedat\": \"2025-09-11T18:43:25.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-11T06:09:16.000Z\",\n            \"updatedat\": \"2025-09-11T06:09:16.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-10T22:40:14.000Z\",\n            \"updatedat\": \"2025-09-10T22:40:14.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-10T22:31:25.000Z\",\n            \"updatedat\": \"2025-09-10T22:31:25.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-10T22:29:54.000Z\",\n            \"updatedat\": \"2025-09-10T22:29:54.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-10T22:13:04.000Z\",\n            \"updatedat\": \"2025-09-10T22:13:04.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-10T22:02:47.000Z\",\n            \"updatedat\": \"2025-09-10T22:02:47.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-10T21:54:05.000Z\",\n            \"updatedat\": \"2025-09-10T21:54:05.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-10T21:51:11.000Z\",\n            \"updatedat\": \"2025-09-10T21:51:11.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-10T21:46:56.000Z\",\n            \"updatedat\": \"2025-09-10T21:46:56.000Z\"\n        },\n        {\n            \"fullname\": null,\n            \"inputter\": \"ogundelefemi@gmail.com\",\n            \"activity\": null,\n            \"createdat\": \"2025-09-10T21:41:41.000Z\",\n            \"updatedat\": \"2025-09-10T21:41:41.000Z\"\n        }\n    ]\n}"
        }
      ]
    },
    {
      "name": "Refresh Token",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "const password = 'myStrongPassword';\r",
              "const secret = 'mySharedSecret';\r",
              "// const data = { message: 'hello world' };\r",
              "const data = {\r",
              "    \"email\" : \"test2@test.com\",\r",
              "    \"password\" : \"1234567\",\r",
              "    \"firstname\" : \"Emmanuel\",\r",
              "    \"lastname\" : \"Test\",\r",
              "    \"phonenumber\" : \"08163549875\",\r",
              "    \"accounttype\": \"corporate\"\r",
              "}\r",
              "\r",
              "function generateSalt(len = 16) {\r",
              "    return crypto.getRandomValues(new Uint8Array(len));\r",
              "}\r",
              "\r",
              "function generateIV(len = 12) {\r",
              "    return crypto.getRandomValues(new Uint8Array(len));\r",
              "}\r",
              "\r",
              "function bufToB64(buf) {\r",
              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
              "}\r",
              "\r",
              "function deriveKey(password, salt) {\r",
              "    const encoder = new TextEncoder();\r",
              "    return crypto.subtle.importKey(\r",
              "        \"raw\", encoder.encode(password),\r",
              "        { name: \"PBKDF2\" },\r",
              "        false,\r",
              "        [\"deriveKey\"]\r",
              "    ).then(keyMaterial => {\r",
              "        return crypto.subtle.deriveKey({\r",
              "            name: \"PBKDF2\",\r",
              "            salt: salt,\r",
              "            iterations: 100000,\r",
              "            hash: \"SHA-256\"\r",
              "        }, keyMaterial, {\r",
              "            name: \"AES-GCM\",\r",
              "            length: 256\r",
              "        }, true, [\"encrypt\"]);\r",
              "    });\r",
              "}\r",
              "\r",
              "async function hashSHA256(message) {\r",
              "    const encoder = new TextEncoder();\r",
              "    const data = encoder.encode(message);\r",
              "    const hashBuffer = await crypto.subtle.digest(\"SHA-256\", data);\r",
              "    return bufToB64(hashBuffer);\r",
              "}\r",
              "\r",
              "async function encrypt(data, password) {\r",
              "    const salt = generateSalt();\r",
              "    const iv = generateIV();\r",
              "    const encoder = new TextEncoder();\r",
              "    const encodedData = encoder.encode(JSON.stringify(data));\r",
              "\r",
              "    return deriveKey(password, salt).then(key => {\r",
              "        return crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, encodedData)\r",
              "            .then(async encrypted => {\r",
              "                const result = {\r",
              "                    salt: bufToB64(salt),\r",
              "                    iv: bufToB64(iv),\r",
              "                    ciphertext: bufToB64(encrypted)\r",
              "                };\r",
              "\r",
              "                // console.log('result => ', result)\r",
              "                const encryptedPayload = btoa(JSON.stringify(result));\r",
              "                // console.log('encryptedPayload => ', encryptedPayload)\r",
              "\r",
              "                // âœ… Correctly create input to hash\r",
              "                const inputToHash = encryptedPayload + secret;\r",
              "                // const inputToHash = encryptedPayload ;\r",
              "                // console.log('ðŸ“¥ Input to hash (client):', inputToHash); // âœ… This is what backend hashes\r",
              "\r",
              "                const hash = await hashSHA256(inputToHash);\r",
              "\r",
              "                pm.request.headers.upsert({\r",
              "                    key: 'X-Payload-Hash',\r",
              "                    value: hash\r",
              "                });\r",
              "\r",
              "                const finalPayload = JSON.stringify({ encrypted: encryptedPayload });\r",
              "                pm.variables.set('body', finalPayload);\r",
              "\r",
              "                console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
              "                console.log('ðŸ” X-Payload-Hash:', hash);\r",
              "\r",
              "                return finalPayload;\r",
              "            });\r",
              "    });\r",
              "}\r",
              "\r",
              "await encrypt(data, password);\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{{body}}\r\n",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{BASE_URL}}/token/refresh",
          "host": [
            "{{BASE_URL}}"
          ],
          "path": [
            "token",
            "refresh"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Get Decripted Payload",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "const password = 'myStrongPassword';\r",
              "const secret = 'mySharedSecret';\r",
              "// const data = { message: 'hello world' };\r",
              "const data = { Name: 'Femi Ogundele', Gender:'Male', message: 'hello world' };\r",
              "\r",
              "function generateSalt(len = 16) {\r",
              "    return crypto.getRandomValues(new Uint8Array(len));\r",
              "}\r",
              "\r",
              "function generateIV(len = 12) {\r",
              "    return crypto.getRandomValues(new Uint8Array(len));\r",
              "}\r",
              "\r",
              "function bufToB64(buf) {\r",
              "    return btoa(String.fromCharCode(...new Uint8Array(buf)));\r",
              "}\r",
              "\r",
              "function deriveKey(password, salt) {\r",
              "    const encoder = new TextEncoder();\r",
              "    return crypto.subtle.importKey(\r",
              "        \"raw\", encoder.encode(password),\r",
              "        { name: \"PBKDF2\" },\r",
              "        false,\r",
              "        [\"deriveKey\"]\r",
              "    ).then(keyMaterial => {\r",
              "        return crypto.subtle.deriveKey({\r",
              "            name: \"PBKDF2\",\r",
              "            salt: salt,\r",
              "            iterations: 100000,\r",
              "            hash: \"SHA-256\"\r",
              "        }, keyMaterial, {\r",
              "            name: \"AES-GCM\",\r",
              "            length: 256\r",
              "        }, true, [\"encrypt\"]);\r",
              "    });\r",
              "}\r",
              "\r",
              "async function hashSHA256(message) {\r",
              "    const encoder = new TextEncoder();\r",
              "    const data = encoder.encode(message);\r",
              "    const hashBuffer = await crypto.subtle.digest(\"SHA-256\", data);\r",
              "    return bufToB64(hashBuffer);\r",
              "}\r",
              "\r",
              "async function encrypt(data, password) {\r",
              "    const salt = generateSalt();\r",
              "    const iv = generateIV();\r",
              "    const encoder = new TextEncoder();\r",
              "    const encodedData = encoder.encode(JSON.stringify(data));\r",
              "\r",
              "    return deriveKey(password, salt).then(key => {\r",
              "        return crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, encodedData)\r",
              "            .then(async encrypted => {\r",
              "                const result = {\r",
              "                    salt: bufToB64(salt),\r",
              "                    iv: bufToB64(iv),\r",
              "                    ciphertext: bufToB64(encrypted)\r",
              "                };\r",
              "\r",
              "                // console.log('result => ', result)\r",
              "                const encryptedPayload = btoa(JSON.stringify(result));\r",
              "                // console.log('encryptedPayload => ', encryptedPayload)\r",
              "\r",
              "                // âœ… Correctly create input to hash\r",
              "                const inputToHash = encryptedPayload + secret;\r",
              "                // const inputToHash = encryptedPayload ;\r",
              "                // console.log('ðŸ“¥ Input to hash (client):', inputToHash); // âœ… This is what backend hashes\r",
              "\r",
              "                const hash = await hashSHA256(inputToHash);\r",
              "\r",
              "                pm.request.headers.upsert({\r",
              "                    key: 'X-Payload-Hash',\r",
              "                    value: hash\r",
              "                });\r",
              "\r",
              "                const finalPayload = JSON.stringify({ encrypted: encryptedPayload });\r",
              "                pm.variables.set('body', finalPayload);\r",
              "\r",
              "                console.log('ðŸ“¦ Final Payload:', finalPayload);\r",
              "                console.log('ðŸ” X-Payload-Hash:', hash);\r",
              "\r",
              "                return finalPayload;\r",
              "            });\r",
              "    });\r",
              "}\r",
              "\r",
              "await encrypt(data, password);\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{{body}}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{BASE_URL}}/auth/getplainpayload",
          "host": [
            "{{BASE_URL}}"
          ],
          "path": [
            "auth",
            "getplainpayload"
          ]
        },
        "description": "Get decoded payload in plain text"
      },
      "response": []
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "exec": [
          ""
        ]
      }
    }
  ]
}